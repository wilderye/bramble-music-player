{"version":3,"file":"index.js","mappings":"sGAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,E,GCRPI,EAA2B,CAAC,ECDhC,MAAM,EAA+BC,ICE/BC,EAAa,CAAEC,MAAO,eACtBC,EAAa,CAAED,MAAO,0BACtBE,EAAa,CACfP,IAAK,EACLK,MAAO,eAELG,EAAa,CAAEH,MAAO,cACtBI,EAAa,CAAC,OACdC,EAAa,CACfV,IAAK,EACLK,MAAO,mCAELM,EAAa,CAAEN,MAAO,WACtBO,EAAa,CAAC,SACdC,EAAa,CAAC,SACdC,EAAc,CAAET,MAAO,YACvBU,EAAc,CAAEV,MAAO,iBACvBW,EAAc,CAAC,SACfC,EAAc,CAAEZ,MAAO,0BACvBa,EAAc,CAAEb,MAAO,mBACvBc,EAAc,CAAEd,MAAO,YACvBe,EAAc,CAAC,QAAS,WACxBC,EAAc,CAAEhB,MAAO,SACvBiB,EAAc,CAAEjB,MAAO,SACvBkB,EAAc,CAAElB,MAAO,UACvBmB,EAAc,CAAEnB,MAAO,SACvBoB,EAAc,CAChBzB,IAAK,EACLK,MAAO,iBAIX,GAA6B,qBAAiB,CAC1CqB,OAAQ,MACR,KAAAC,CAAMC,GACF,MAAMC,GAAoB,IAAAC,MAAI,GACxBC,GAAkB,IAAAD,MAAI,GACtBE,GAAiB,IAAAF,KAAI,MACrBG,GAAgB,IAAAH,KAAI,MAEpBI,GAA0B,IAAAJ,MAAI,GAC9BK,EAAOC,GAAYC,QAAQF,IAAI,WAAWC,KAC1CE,GAAiB,IAAAR,KAAI,MACrBS,GAAsB,IAAAT,KAAI,MAC1BU,GAAgB,IAAAV,MAAI,GACpBW,GAAY,IAAAX,MAAI,GAChBY,GAAkB,IAAAZ,MAAI,GACtBa,GAAc,IAAAb,KAAI,MAClBc,GAAW,IAAAd,KAAI,IACfe,GAAe,IAAAf,KAAI,IACnBgB,GAAc,IAAAhB,MAAK,GACnBiB,GAAe,IAAAjB,KAAI,QAEnBkB,EAAoB,KAEtB,GAAId,EAAwBe,MAGxB,OAFAf,EAAwBe,OAAQ,OAChCd,EAAI,0BAGR,MAAMe,EAAQ,CAAC,OAAQ,SAAU,UAC3BC,EAAeD,EAAME,QAAQL,EAAaE,OAE1CI,EAAWH,GADEC,EAAe,GAAKD,EAAMI,QAE7ChB,EAAeW,OAAOM,gBAAgBF,IAE1C,EAAYpB,EAAe,KACvBJ,EAAkBoB,OAASpB,EAAkBoB,MACzCpB,EAAkBoB,QAClBlB,EAAgBkB,OAAQ,GAC5Bd,EAAI,kBAEJD,EAAwBe,OAAQ,EAChCd,EAAI,uBACL,CAAEqB,MAAO,MACZ,MAAMC,EAAe,KACjB1B,EAAgBkB,OAASlB,EAAgBkB,MACrClB,EAAgBkB,QAChBpB,EAAkBoB,OAAQ,IAE5BS,EAAqB,KACnB3B,EAAgBkB,QAChBlB,EAAgBkB,OAAQ,IAG1BU,EAAmBC,IACrBzB,EAAI,aACJM,EAAUQ,MAAQW,EAAMnB,UACxBC,EAAgBO,MAAQW,EAAMlB,gBAC9BC,EAAYM,MAAQW,EAAMjB,YAC1BC,EAASK,MAAQW,EAAMhB,SACvBC,EAAaI,MAAQW,EAAMf,aAC3BE,EAAaE,MAAQW,EAAMb,aACvBa,EAAMjB,YACNG,EAAYG,MACRW,EAAMhB,SAASU,OAAS,EAClBM,EAAMhB,SAASiB,UAAUC,GAASA,EAAMC,QAAUH,EAAMjB,YAAYoB,OAClED,EAAME,SAAWJ,EAAMjB,YAAYqB,QACnCF,EAAMG,QAAUL,EAAMjB,YAAYsB,QACnC,EAGXnB,EAAYG,OAAS,GAGvBiB,EAAkB,IAAM5B,EAAeW,OAAOiB,kBAC9CC,EAAW,IAAM7B,EAAeW,OAAOkB,WACvCC,EAAW,IAAM9B,EAAeW,OAAOmB,WAEvCC,EAAyBC,IAC3B,IAAKtC,EAAeiB,MAChB,OACJ,MAAMsB,EAAOvC,EAAeiB,MAAMuB,wBAC5BC,EAAYF,EAAKG,OAASJ,EAAMK,QAChCC,EAAYC,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAGN,EAAYF,EAAKS,SAC3DnC,EAAaI,MAAQ2B,EACrBtC,EAAeW,OAAOgC,cAAcL,IAElCM,EAAoBZ,IACtBD,EAAsBC,IAEpBa,EAAgB,KAClBC,SAASC,oBAAoB,YAAaH,GAC1CE,SAASC,oBAAoB,UAAWF,GACxC7C,EAAeW,OAAOqC,0BAA0BzC,EAAaI,QAE3DsC,EAAmBjB,IACrBD,EAAsBC,GACtBc,SAASI,iBAAiB,YAAaN,GACvCE,SAASI,iBAAiB,UAAWL,EAAe,CAAEM,MAAM,KA2ChE,OAxBA,IAAAC,WAAU,KACN,WACI,IACIvD,EAAI,2BACJ,MAAMwD,QArBWC,EAqBqB,iBArBTC,EAqB2B,IApBzD,IAAIC,QAAQ,CAACC,EAASC,KACzB,MAAMC,EAAYC,KAAKC,MACjBC,EAAWC,YAAY,KAEM,iBAApBC,IAAIV,IAAgD,OAApBU,IAAIV,IAC3CW,cAAcH,GAEdL,EAAQO,IAAIV,KAEPM,KAAKC,MAAQF,EAAYJ,IAC9BU,cAAcH,GACdJ,EAAO,IAAIQ,MAAM,YAAYZ,QAAiBC,EAAY,iBAE/D,QAQC1D,EAAI,uCACEwD,EAAIc,wBACVtE,EAAI,iBACJG,EAAeW,MAAQ0C,EACvB,MAAMe,EAAef,EAAIgB,kBACzBhD,EAAgB+C,GAChBf,EAAIiB,kBAAkBjD,GACtBxB,EAAI,mBACJA,EAAI,wBACJK,EAAcS,OAAQ,CAC1B,CACA,MAAO4D,GAEH1E,EADiB,YAAY0E,KAE7BtE,EAAoBU,MAAQ4D,aAAiBL,MAAQK,EAAMzE,QAAU0E,OAAOD,GAC5ErE,EAAcS,OAAQ,CAC1B,CAtCR,IAA6B2C,EAAYC,CAuCpC,EArBD,KAuBG,CAACkB,EAAMC,MACF,kBAAc,wBAAoB,WAAW,KAAM,EACvD,wBAAoB,wCACpB,wBAAoB,MAAO5G,EAAY,EACnC,wBAAoB,MAAO,CACvBC,OAAO,oBAAgB,CAAC,qBAAsB,CACtC,WAAYmC,EAAcS,MAC1B,mBAAoBpB,EAAkBoB,MACtC,mBAAoBP,EAAgBO,SAE5CgE,QAASvD,GACV,EACC,wBAAoB,MAAOpD,EAAY,EACnC,wBAAoB,oBAClBiC,EAAoBU,OA8EhB,wBAAoB,QAAQ,KA7E3B,kBAAc,wBAAoB,MAAO1C,EAAY,EACpD,wBAAoB,4BACpB,wBAAoB,MAAOC,EAAY,CAClCmC,EAAYM,OAAOgB,QACb,kBAAc,wBAAoB,MAAO,CACxCjE,IAAK,EACLkH,IAAKvE,EAAYM,MAAMgB,MACvBkD,IAAK,KACL9G,MAAO,aACR,KAAM,EAAeI,MACrB,kBAAc,wBAAoB,MAAOC,EAAY,IAAKsG,EAAO,KAAOA,EAAO,GAAK,EAC/E,wBAAoB,IAAK,CAAE3G,MAAO,qBAAuB,MAAO,SAE5E,wBAAoB,MAAOM,EAAY,EACnC,wBAAoB,IAAK,CACrBN,MAAO,QACP0D,MAAOpB,EAAYM,OAAOc,QAC3B,qBAAiBpB,EAAYM,OAAOc,OAAS,SAAU,EAAqBnD,IAC/E,wBAAoB,IAAK,CACrBP,MAAO,SACP0D,MAAOpB,EAAYM,OAAOe,SAC3B,qBAAiBrB,EAAYM,OAAOe,QAAU,SAAU,EAAqBnD,QAGxF,wBAAoB,mCACpB,wBAAoB,MAAOC,EAAa,EACpC,wBAAoB,SAAU,CAC1BsG,QAAS,gBACTtF,IAAKG,EACL5B,MAAO,cACP0D,MAAO,0BACPkD,SAAS,mBAAejE,EAAmB,CAAC,aAC7C,EACC,wBAAoB,IAAK,CACrB3C,OAAO,oBAAgB,CAAC,WAAY,CAC5B,aAAqC,SAAvB0C,EAAaE,MAC3B,aAAqC,WAAvBF,EAAaE,MAC3B,YAAoC,WAAvBF,EAAaE,UAEnC,KAAM,IACV,MACH,wBAAoB,MAAOlC,EAAa,EACpC,wBAAoB,SAAU,CAC1BV,MAAO,cACP0D,MAAO,MACPkD,QAAS7C,GACV,IAAK4C,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE3G,MAAO,6BAA+B,MAAO,QAEhF,wBAAoB,SAAU,CAC1BA,MAAO,6BACP0D,MAAOtB,EAAUQ,MAAQ,KAAO,KAChCgE,QAAS/C,GACV,EACC,wBAAoB,IAAK,CACrB7D,OAAO,oBAAgBoC,EAAUQ,MAAQ,oBAAsB,qBAChE,KAAM,IACV,EAAejC,IAClB,wBAAoB,SAAU,CAC1BX,MAAO,cACP0D,MAAO,MACPkD,QAAS9C,GACV,IAAK6C,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE3G,MAAO,4BAA8B,MAAO,UAGnF,wBAAoB,MAAOY,EAAa,EACpC,wBAAoB,SAAU,CAC1BZ,MAAO,yBACP0D,MAAO,KACPkD,SAAS,mBAAexD,EAAc,CAAC,UACxC,IAAKuD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE3G,MAAO,2BAA6B,MAAO,eAM9F,wBAAoB,kCACpB,wBAAoB,MAAOa,EAAa,EACpC,wBAAoB,KAAMC,EAAa,GAClC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYyB,EAASK,MAAO,CAACoE,EAAMC,MAC/E,kBAAc,wBAAoB,KAAM,CAC5CtH,IAAK,GAAGqH,EAAKtD,SAASuD,IACtBjH,OAAO,oBAAgB,CAAEkH,OAAQD,IAAUxE,EAAYG,QACvDc,MAAO,OAAOsD,EAAKtD,QACnBkD,QAAUO,GArK5B,CAACF,GAAUhF,EAAeW,OAAOwE,UAAUH,GAqKJ,CAAWA,IACjC,EACC,wBAAoB,OAAQjG,GAAa,qBAAiBiG,EAAQ,GAAI,IACtE,wBAAoB,OAAQhG,GAAa,qBAAiB+F,EAAKtD,OAAQ,IACvE,wBAAoB,OAAQxC,GAAa,qBAAiB8F,EAAKrD,QAAS,IACzE,GAAuB5C,KAC1B,aAIjB,IACH,wBAAoB,2CACnBW,EAAqB,QACf,kBAAc,wBAAoB,MAAO,CACxC/B,IAAK,EACLK,MAAO,0BACP4G,QAASD,EAAO,KAAOA,EAAO,IAAK,mBAAe,OAAW,CAAC,WAC/D,EACC,wBAAoB,MAAO,CACvBI,QAAS,iBACTtF,IAAKE,EACL3B,MAAO,uBACPqH,aAAa,mBAAenC,EAAiB,CAAC,UAAW,UAC1D,EACC,wBAAoB,MAAO/D,EAAa,EACpC,wBAAoB,MAAO,CACvBnB,MAAO,WACPsH,OAAO,oBAAgB,CAAE3C,OAAgC,IAArBnC,EAAaI,MAAhB,OAClC,KAAM,MAEb,wBAAoB,MAAO,CACvB5C,MAAO,QACPsH,OAAO,oBAAgB,CAAEjD,OAAQ,QAA6B,IAArB7B,EAAaI,mBACvD,KAAM,IACV,SAEL,wBAAoB,QAAQ,IAClC,wBAAoB,mBACnBV,EAAyB,QACnB,kBAAc,wBAAoB,MAAOd,EAAa,CACrDuF,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,KAAM,EACrD,wBAAoB,IAAK,CAAE3G,MAAO,sCAClC,qBAAiB,cACjB,KACJ,wBAAoB,QAAS,MAAM,qBAAiBkC,EAAoBU,OAAQ,OAElF,wBAAoB,QAAQ,MAEvC,MAEX,I,MFjUJ,SAAS2E,EAAoBC,GAE5B,IAAIC,EAAe5H,EAAyB2H,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAanI,QAGrB,IAAIqI,EAAS9H,EAAyB2H,GAAY,CAGjDlI,QAAS,CAAC,GAOX,OAHAsI,EAAoBJ,GAAUG,EAAQA,EAAOrI,QAASiI,GAG/CI,EAAOrI,OACf,C,MGhBA,MAEA,GAFiC,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBCHvEuI,EAAE,MACA,IAAAC,WAAUC,GAAKC,MAAM","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","webpack://tavern_helper_template/./src/音乐前端/app.vue?9b84","webpack://tavern_helper_template/src/音乐前端/app.vue?5377","src://tavern_helper_template/src/音乐前端/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = { class: \"player-root\" };\nconst _hoisted_2 = { class: \"player-content-wrapper\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"player-main\"\n};\nconst _hoisted_4 = { class: \"track-info\" };\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n    key: 1,\n    class: \"cover-art cover-art-placeholder\"\n};\nconst _hoisted_7 = { class: \"details\" };\nconst _hoisted_8 = [\"title\"];\nconst _hoisted_9 = [\"title\"];\nconst _hoisted_10 = { class: \"controls\" };\nconst _hoisted_11 = { class: \"main-controls\" };\nconst _hoisted_12 = [\"title\"];\nconst _hoisted_13 = { class: \"volume-control-wrapper\" };\nconst _hoisted_14 = { class: \"playlist-drawer\" };\nconst _hoisted_15 = { class: \"playlist\" };\nconst _hoisted_16 = [\"title\", \"onClick\"];\nconst _hoisted_17 = { class: \"index\" };\nconst _hoisted_18 = { class: \"title\" };\nconst _hoisted_19 = { class: \"artist\" };\nconst _hoisted_20 = { class: \"track\" };\nconst _hoisted_21 = {\n    key: 1,\n    class: \"error-overlay\"\n};\nimport { onMounted, ref } from 'vue';\nimport { onLongPress } from '@vueuse/core';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'app',\n    setup(__props) {\n        const isPlaylistVisible = ref(false);\n        const isVolumeVisible = ref(false);\n        const volumeTrackRef = ref(null);\n        const modeButtonRef = ref(null);\n        // [新增] 用于区分长按和轻点的“信号旗”\n        const isLongPressJustFinished = ref(false);\n        const log = (message) => console.log(`[播放器前端] ${message}`);\n        const musicPlayerAPI = ref(null);\n        const initializationError = ref(null);\n        const isReadyToShow = ref(false);\n        const isPlaying = ref(false);\n        const isTransitioning = ref(false);\n        const currentItem = ref(null);\n        const playlist = ref([]);\n        const masterVolume = ref(0.5);\n        const activeIndex = ref(-1);\n        const playbackMode = ref('list');\n        // --- 核心交互逻辑 ---\n        const cyclePlaybackMode = () => {\n            // [修改] 增加“信号旗”检查逻辑\n            if (isLongPressJustFinished.value) {\n                isLongPressJustFinished.value = false; // 放下信号旗\n                log('“轻点”事件被抑制，因为它是一次长按的结束。');\n                return; // 阻止后续的模式切换逻辑\n            }\n            const modes = ['list', 'random', 'single'];\n            const currentIndex = modes.indexOf(playbackMode.value);\n            const nextIndex = (currentIndex + 1) % modes.length;\n            const nextMode = modes[nextIndex];\n            musicPlayerAPI.value?.setPlaybackMode(nextMode);\n        };\n        onLongPress(modeButtonRef, () => {\n            isPlaylistVisible.value = !isPlaylistVisible.value;\n            if (isPlaylistVisible.value)\n                isVolumeVisible.value = false;\n            log('长按触发：切换播放列表显示。');\n            // [修改] 升起“信号旗”，标记刚刚完成了一次长按\n            isLongPressJustFinished.value = true;\n            log('长按已处理，设置“轻点”抑制信号旗。');\n        }, { delay: 400 });\n        const toggleVolume = () => {\n            isVolumeVisible.value = !isVolumeVisible.value;\n            if (isVolumeVisible.value)\n                isPlaylistVisible.value = false;\n        };\n        const handleClickOutside = () => {\n            if (isVolumeVisible.value) {\n                isVolumeVisible.value = false;\n            }\n        };\n        const updateFullState = (state) => {\n            log(`接收到完整状态更新`);\n            isPlaying.value = state.isPlaying;\n            isTransitioning.value = state.isTransitioning;\n            currentItem.value = state.currentItem;\n            playlist.value = state.playlist;\n            masterVolume.value = state.masterVolume;\n            playbackMode.value = state.playbackMode;\n            if (state.currentItem) {\n                activeIndex.value =\n                    state.playlist.length > 0\n                        ? state.playlist.findIndex(track => track.title === state.currentItem.title &&\n                            track.artist === state.currentItem.artist &&\n                            track.cover === state.currentItem.cover)\n                        : -1;\n            }\n            else {\n                activeIndex.value = -1;\n            }\n        };\n        const togglePlayPause = () => musicPlayerAPI.value?.togglePlayPause();\n        const playNext = () => musicPlayerAPI.value?.playNext();\n        const playPrev = () => musicPlayerAPI.value?.playPrev();\n        const playIndex = (index) => musicPlayerAPI.value?.playIndex(index);\n        const updateVolumeFromEvent = (event) => {\n            if (!volumeTrackRef.value)\n                return;\n            const rect = volumeTrackRef.value.getBoundingClientRect();\n            const relativeY = rect.bottom - event.clientY;\n            const newVolume = Math.max(0, Math.min(1, relativeY / rect.height));\n            masterVolume.value = newVolume;\n            musicPlayerAPI.value?.setLiveVolume(newVolume);\n        };\n        const handleVolumeDrag = (event) => {\n            updateVolumeFromEvent(event);\n        };\n        const endVolumeDrag = () => {\n            document.removeEventListener('mousemove', handleVolumeDrag);\n            document.removeEventListener('mouseup', endVolumeDrag);\n            musicPlayerAPI.value?.persistVolumeAndBroadcast(masterVolume.value);\n        };\n        const startVolumeDrag = (event) => {\n            updateVolumeFromEvent(event);\n            document.addEventListener('mousemove', handleVolumeDrag);\n            document.addEventListener('mouseup', endVolumeDrag, { once: true });\n        };\n        function waitForGlobalObject(objectName, timeoutMs) {\n            return new Promise((resolve, reject) => {\n                const startTime = Date.now();\n                const interval = setInterval(() => {\n                    // @ts-expect-error top 是一个全局浏览器对象\n                    if (typeof top[objectName] === 'object' && top[objectName] !== null) {\n                        clearInterval(interval);\n                        // @ts-expect-error top 是一个全局浏览器对象\n                        resolve(top[objectName]);\n                    }\n                    else if (Date.now() - startTime > timeoutMs) {\n                        clearInterval(interval);\n                        reject(new Error(`关键API对象 \"${objectName}\" 在 ${timeoutMs / 1000} 秒内未出现。`));\n                    }\n                }, 100);\n            });\n        }\n        onMounted(() => {\n            (async () => {\n                try {\n                    log('开始初始化流程... 界面当前为“隐身”状态。');\n                    const api = await waitForGlobalObject('musicPlayerAPI', 5000);\n                    log('后台脚本API \"musicPlayerAPI\" 已就绪。');\n                    await api.requestInitialization();\n                    log('后台初始化请求已成功完成。');\n                    musicPlayerAPI.value = api;\n                    const initialState = api.getCurrentState();\n                    updateFullState(initialState);\n                    api.onFullStateUpdate(updateFullState);\n                    log('初始化成功！界面已与后台同步。');\n                    log('[幕启] 后台状态已同步，即将显示界面。');\n                    isReadyToShow.value = true;\n                }\n                catch (error) {\n                    const errorMsg = `初始化流程失败: ${error}`;\n                    log(errorMsg);\n                    initializationError.value = error instanceof Error ? error.message : String(error);\n                    isReadyToShow.value = true;\n                }\n            })();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createCommentVNode(\" [修改点] V9.1 - 新增根节点，用于解耦音量条与主容器的布局 \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"aria-pod-container\", {\n                                'is-ready': isReadyToShow.value,\n                                'is-playlist-open': isPlaylistVisible.value,\n                                'is-transitioning': isTransitioning.value,\n                            }]),\n                        onClick: handleClickOutside\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createCommentVNode(\" \\\"Aria Pod\\\" 主界面 \"),\n                            (!initializationError.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                                    _createCommentVNode(\" 1. 当前曲目区 (Track Info) \"),\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        (currentItem.value?.cover)\n                                            ? (_openBlock(), _createElementBlock(\"img\", {\n                                                key: 0,\n                                                src: currentItem.value.cover,\n                                                alt: \"封面\",\n                                                class: \"cover-art\"\n                                            }, null, 8 /* PROPS */, _hoisted_5))\n                                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[1] || (_cache[1] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-music\" }, null, -1 /* CACHED */)\n                                                ]))])),\n                                        _createElementVNode(\"div\", _hoisted_7, [\n                                            _createElementVNode(\"p\", {\n                                                class: \"title\",\n                                                title: currentItem.value?.title\n                                            }, _toDisplayString(currentItem.value?.title || '歌单未配置'), 9 /* TEXT, PROPS */, _hoisted_8),\n                                            _createElementVNode(\"p\", {\n                                                class: \"artist\",\n                                                title: currentItem.value?.artist\n                                            }, _toDisplayString(currentItem.value?.artist || '未知艺术家'), 9 /* TEXT, PROPS */, _hoisted_9)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" 2. 核心控制区 (Playback Controls) \"),\n                                    _createElementVNode(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"button\", {\n                                            ref_key: \"modeButtonRef\",\n                                            ref: modeButtonRef,\n                                            class: \"control-btn\",\n                                            title: \"切换播放模式 (轻点) / 打开列表 (长按)\",\n                                            onClick: _withModifiers(cyclePlaybackMode, [\"prevent\"])\n                                        }, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass([\"fa-solid\", {\n                                                        'fa-list-ul': playbackMode.value === 'list',\n                                                        'fa-shuffle': playbackMode.value === 'random',\n                                                        'fa-repeat': playbackMode.value === 'single',\n                                                    }])\n                                            }, null, 2 /* CLASS */)\n                                        ], 512 /* NEED_PATCH */),\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"control-btn\",\n                                                title: \"上一首\",\n                                                onClick: playPrev\n                                            }, [...(_cache[2] || (_cache[2] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-backward-step\" }, null, -1 /* CACHED */)\n                                                ]))]),\n                                            _createElementVNode(\"button\", {\n                                                class: \"control-btn play-pause-btn\",\n                                                title: isPlaying.value ? '暂停' : '播放',\n                                                onClick: togglePlayPause\n                                            }, [\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(isPlaying.value ? 'fa-solid fa-pause' : 'fa-solid fa-play')\n                                                }, null, 2 /* CLASS */)\n                                            ], 8 /* PROPS */, _hoisted_12),\n                                            _createElementVNode(\"button\", {\n                                                class: \"control-btn\",\n                                                title: \"下一首\",\n                                                onClick: playNext\n                                            }, [...(_cache[3] || (_cache[3] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-forward-step\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_13, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"control-btn volume-btn\",\n                                                title: \"音量\",\n                                                onClick: _withModifiers(toggleVolume, [\"stop\"])\n                                            }, [...(_cache[4] || (_cache[4] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-volume-high\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" 3. 播放列表抽屉 (Playlist Drawer) \"),\n                            _createElementVNode(\"div\", _hoisted_14, [\n                                _createElementVNode(\"ul\", _hoisted_15, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(playlist.value, (item, index) => {\n                                        return (_openBlock(), _createElementBlock(\"li\", {\n                                            key: `${item.title}-${index}`,\n                                            class: _normalizeClass({ active: index === activeIndex.value }),\n                                            title: `播放: ${item.title}`,\n                                            onClick: ($event) => (playIndex(index))\n                                        }, [\n                                            _createElementVNode(\"span\", _hoisted_17, _toDisplayString(index + 1), 1 /* TEXT */),\n                                            _createElementVNode(\"span\", _hoisted_18, _toDisplayString(item.title), 1 /* TEXT */),\n                                            _createElementVNode(\"span\", _hoisted_19, _toDisplayString(item.artist), 1 /* TEXT */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_16));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ])\n                        ])\n                    ], 2 /* CLASS */),\n                    _createCommentVNode(\" [修改点] V9.1 - 音量滑块现在是根节点的子元素，与主容器是兄弟关系 \"),\n                    (isVolumeVisible.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"volume-slider-container\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", {\n                                ref_key: \"volumeTrackRef\",\n                                ref: volumeTrackRef,\n                                class: \"custom-volume-slider\",\n                                onMousedown: _withModifiers(startVolumeDrag, [\"prevent\", \"stop\"])\n                            }, [\n                                _createElementVNode(\"div\", _hoisted_20, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"progress\",\n                                        style: _normalizeStyle({ height: `${masterVolume.value * 100}%` })\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"div\", {\n                                    class: \"thumb\",\n                                    style: _normalizeStyle({ bottom: `calc(${masterVolume.value * 100}% - 4px)` })\n                                }, null, 4 /* STYLE */)\n                            ], 544 /* NEED_HYDRATION, NEED_PATCH */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" 初始化错误提示 (无变化) \"),\n                    (initializationError.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                            _cache[5] || (_cache[5] = _createElementVNode(\"p\", null, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-triangle-exclamation\" }),\n                                _createTextVNode(\" 播放器加载失败\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"small\", null, _toDisplayString(initializationError.value), 1 /* TEXT */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./app.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./app.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./app.vue?vue&type=style&index=0&id=4cac06d8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4cac06d8\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport app from './app.vue';\n\n$(() => {\n  createApp(app).mount('#app');\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","__name","setup","__props","isPlaylistVisible","ref","isVolumeVisible","volumeTrackRef","modeButtonRef","isLongPressJustFinished","log","message","console","musicPlayerAPI","initializationError","isReadyToShow","isPlaying","isTransitioning","currentItem","playlist","masterVolume","activeIndex","playbackMode","cyclePlaybackMode","value","modes","currentIndex","indexOf","nextMode","length","setPlaybackMode","delay","toggleVolume","handleClickOutside","updateFullState","state","findIndex","track","title","artist","cover","togglePlayPause","playNext","playPrev","updateVolumeFromEvent","event","rect","getBoundingClientRect","relativeY","bottom","clientY","newVolume","Math","max","min","height","setLiveVolume","handleVolumeDrag","endVolumeDrag","document","removeEventListener","persistVolumeAndBroadcast","startVolumeDrag","addEventListener","once","onMounted","api","objectName","timeoutMs","Promise","resolve","reject","startTime","Date","now","interval","setInterval","top","clearInterval","Error","requestInitialization","initialState","getCurrentState","onFullStateUpdate","error","String","_ctx","_cache","onClick","src","alt","ref_key","item","index","active","$event","playIndex","onMousedown","style","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","$","createApp","app","mount"],"sourceRoot":""}