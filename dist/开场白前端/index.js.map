{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/开场白前端/utils/id-generator.ts","webpack://tavern_helper_template/./src/开场白前端/components/TrackInput.vue?1bf6","webpack://tavern_helper_template/src/开场白前端/components/TrackInput.vue?db68","webpack://tavern_helper_template/./src/开场白前端/components/PlaylistEditor.vue?7fcc","webpack://tavern_helper_template/src/开场白前端/components/PlaylistEditor.vue?7015","src://tavern_helper_template/src/开场白前端/utils/prompt-generator.ts","src://tavern_helper_template/src/开场白前端/utils/validator.ts","webpack://tavern_helper_template/./src/开场白前端/views/Dashboard.vue?e62e","webpack://tavern_helper_template/src/开场白前端/views/Dashboard.vue?42d0","webpack://tavern_helper_template/./src/开场白前端/views/Home.vue?dffb","webpack://tavern_helper_template/src/开场白前端/views/Home.vue?5d11","webpack://tavern_helper_template/./src/开场白前端/views/Setup.vue?9668","webpack://tavern_helper_template/src/开场白前端/views/Setup.vue?180c","src://tavern_helper_template/src/开场白前端/utils/skin-prompt-generator.ts","webpack://tavern_helper_template/./src/开场白前端/views/SkinSetup.vue?bc2a","webpack://tavern_helper_template/src/开场白前端/views/SkinSetup.vue?0c71","webpack://tavern_helper_template/./src/开场白前端/app.vue?99b8","webpack://tavern_helper_template/src/开场白前端/app.vue?a4fc","src://tavern_helper_template/src/开场白前端/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","/**\n * 生成简单的唯一标识符\n * 用于 Vue 的 :key 绑定和内部数据追踪\n */\nexport function generateUUID(): string {\n  // 生成 16 字符的随机字符串 (类似 Mongo ObjectId 或简易 UUID)\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let autoId = '';\n  for (let i = 0; i < 16; i++) {\n    autoId += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return autoId;\n}\n","import { useModel as _useModel, defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vShow as _vShow, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, TransitionGroup as _TransitionGroup, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"w-full space-y-6\" };\nconst _hoisted_2 = { class: \"flex w-full rounded-2xl bg-stone-100 p-1.5 dark:bg-stone-800\" };\nconst _hoisted_3 = { class: \"relative w-full\" };\nconst _hoisted_4 = { class: \"w-full space-y-6\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"flex flex-col items-center justify-center rounded-3xl border-2 border-dashed border-stone-200 py-12 text-center dark:border-stone-700\"\n};\nconst _hoisted_6 = { class: \"space-y-6\" };\nconst _hoisted_7 = { class: \"absolute -top-3 -left-3 z-10 flex h-10 w-10 items-center justify-center rounded-full bg-white text-base font-bold text-stone-400 shadow-sm ring-4 ring-[#FDFCF8] dark:bg-stone-700 dark:text-stone-500 dark:ring-[#1c1917]\" };\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = { class: \"grid gap-6 pt-2\" };\nconst _hoisted_10 = [\"onUpdate:modelValue\"];\nconst _hoisted_11 = { class: \"grid grid-cols-2 gap-6\" };\nconst _hoisted_12 = [\"onUpdate:modelValue\"];\nconst _hoisted_13 = [\"onUpdate:modelValue\"];\nconst _hoisted_14 = [\"onUpdate:modelValue\"];\nimport { generateUUID } from '../utils/id-generator';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TrackInput',\n    props: {\n        \"mode\": { required: true },\n        \"modeModifiers\": {},\n        \"raw\": { required: true },\n        \"rawModifiers\": {},\n        \"structured\": { required: true },\n        \"structuredModifiers\": {},\n    },\n    emits: [\"update:mode\", \"update:raw\", \"update:structured\"],\n    setup(__props) {\n        const mode = _useModel(__props, 'mode');\n        const rawText = _useModel(__props, 'raw');\n        const structuredList = _useModel(__props, 'structured');\n        const addTrack = () => {\n            structuredList.value.push({\n                id: generateUUID(),\n                url: '',\n                title: '',\n                artist: '',\n                cover: '',\n            });\n        };\n        const removeTrack = (index) => {\n            structuredList.value.splice(index, 1);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 1. 模式切换 (Clean Segmented Control) \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        type: \"button\",\n                        class: _normalizeClass([\"flex-1 rounded-xl py-3 text-base font-bold transition-all\",\n                            mode.value === 'raw'\n                                ? 'bg-white text-stone-800 shadow-sm dark:bg-stone-700 dark:text-stone-100'\n                                : 'text-stone-500 hover:text-stone-700 dark:text-stone-400'\n                        ]),\n                        onClick: _cache[0] || (_cache[0] = ($event) => (mode.value = 'raw'))\n                    }, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-magic mr-2\" }, null, -1 /* CACHED */),\n                            _createTextVNode(\" 直接粘贴 \", -1 /* CACHED */)\n                        ]))], 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        type: \"button\",\n                        class: _normalizeClass([\"flex-1 rounded-xl py-3 text-base font-bold transition-all\",\n                            mode.value === 'structured'\n                                ? 'bg-white text-stone-800 shadow-sm dark:bg-stone-700 dark:text-stone-100'\n                                : 'text-stone-500 hover:text-stone-700 dark:text-stone-400'\n                        ]),\n                        onClick: _cache[1] || (_cache[1] = ($event) => (mode.value = 'structured'))\n                    }, [...(_cache[4] || (_cache[4] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-list-ul mr-2\" }, null, -1 /* CACHED */),\n                            _createTextVNode(\" 手动录入 \", -1 /* CACHED */)\n                        ]))], 2 /* CLASS */)\n                ]),\n                _createCommentVNode(\" 2. 模式 A: Raw 文本输入 \"),\n                _withDirectives(_createElementVNode(\"div\", _hoisted_3, [\n                    _withDirectives(_createElementVNode(\"textarea\", {\n                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((rawText).value = $event)),\n                        class: \"min-h-[240px] w-full appearance-none rounded-2xl bg-stone-100 p-5 font-mono text-base text-stone-700 shadow-sm transition-all outline-none placeholder:text-stone-400 focus:bg-white focus:ring-4 focus:ring-[#5C7F67]/20 dark:bg-stone-800 dark:text-stone-200 dark:focus:bg-stone-800 dark:focus:ring-[#5C7F67]/30\",\n                        placeholder: \"请直接粘贴歌曲信息，希望展示的信息完整即可，届时AI会处理内容。\\n例如：\\n1. 歌名 - 歌手 (https://example.com/1.mp3)\\n2. 歌名 https://example.com/2.mp3\"\n                    }, null, 512 /* NEED_PATCH */), [\n                        [_vModelText, rawText.value]\n                    ]),\n                    _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute right-5 bottom-5 text-sm text-stone-400\" }, \"纯文本模式\", -1 /* CACHED */))\n                ], 512 /* NEED_PATCH */), [\n                    [_vShow, mode.value === 'raw']\n                ]),\n                _createCommentVNode(\" 3. 模式 B: 结构化表单 \"),\n                _withDirectives(_createElementVNode(\"div\", _hoisted_4, [\n                    _createCommentVNode(\" 空状态 \"),\n                    (structuredList.value.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                            _cache[7] || (_cache[7] = _createElementVNode(\"p\", { class: \"mb-4 text-lg font-medium text-stone-500 dark:text-stone-400\" }, \"暂无歌曲\", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                type: \"button\",\n                                class: \"rounded-full bg-stone-100 px-8 py-3 text-base font-bold text-stone-600 transition-all hover:-translate-y-0.5 hover:bg-[#5C7F67] hover:text-white hover:shadow-lg dark:bg-stone-800 dark:text-stone-300 dark:hover:bg-[#5C7F67]\",\n                                onClick: addTrack\n                            }, [...(_cache[6] || (_cache[6] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-plus mr-2\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\" 添加第一首歌 \", -1 /* CACHED */)\n                                ]))])\n                        ]))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            _createCommentVNode(\" 列表 \"),\n                            _createElementVNode(\"div\", _hoisted_6, [\n                                _createVNode(_TransitionGroup, { name: \"list\" }, {\n                                    default: _withCtx(() => [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(structuredList.value, (track, index) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: track.id,\n                                                class: \"group relative w-full rounded-3xl bg-white p-6 shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] transition-all dark:bg-stone-800\"\n                                            }, [\n                                                _createCommentVNode(\" 序号 \"),\n                                                _createElementVNode(\"div\", _hoisted_7, _toDisplayString(index + 1), 1 /* TEXT */),\n                                                _createCommentVNode(\" 删除按钮 \"),\n                                                _createElementVNode(\"button\", {\n                                                    type: \"button\",\n                                                    class: \"absolute top-4 right-4 rounded-full p-2 text-stone-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500 dark:hover:bg-rose-900/20\",\n                                                    onClick: ($event) => (removeTrack(index))\n                                                }, [...(_cache[8] || (_cache[8] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-trash-alt text-lg\" }, null, -1 /* CACHED */)\n                                                    ]))], 8 /* PROPS */, _hoisted_8),\n                                                _createElementVNode(\"div\", _hoisted_9, [\n                                                    _createCommentVNode(\" URL \"),\n                                                    _createElementVNode(\"div\", null, [\n                                                        _cache[9] || (_cache[9] = _createElementVNode(\"label\", { class: \"mb-2 block text-sm font-bold text-stone-600 dark:text-stone-300\" }, [\n                                                            _createTextVNode(\" 音频直链 \"),\n                                                            _createElementVNode(\"span\", { class: \"text-rose-400\" }, \"*\")\n                                                        ], -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": ($event) => ((track.url) = $event),\n                                                            type: \"text\",\n                                                            class: \"w-full appearance-none rounded-2xl bg-stone-50 px-5 py-4 text-base text-stone-800 transition-all outline-none placeholder:text-stone-400 focus:bg-white focus:ring-4 focus:ring-[#5C7F67]/20 dark:bg-stone-900 dark:text-stone-200 dark:focus:ring-[#5C7F67]/30\",\n                                                            placeholder: \"https://...\"\n                                                        }, null, 8 /* PROPS */, _hoisted_10), [\n                                                            [_vModelText, track.url]\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\" Title & Artist \"),\n                                                    _createElementVNode(\"div\", _hoisted_11, [\n                                                        _createElementVNode(\"div\", null, [\n                                                            _cache[10] || (_cache[10] = _createElementVNode(\"label\", { class: \"mb-2 block text-sm font-bold text-stone-600 dark:text-stone-300\" }, \"歌名\", -1 /* CACHED */)),\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": ($event) => ((track.title) = $event),\n                                                                type: \"text\",\n                                                                class: \"w-full appearance-none rounded-2xl bg-stone-50 px-5 py-4 text-base text-stone-800 transition-all outline-none placeholder:text-stone-400 focus:bg-white focus:ring-4 focus:ring-[#5C7F67]/20 dark:bg-stone-900 dark:text-stone-200 dark:focus:ring-[#5C7F67]/30\",\n                                                                placeholder: \"选填\"\n                                                            }, null, 8 /* PROPS */, _hoisted_12), [\n                                                                [_vModelText, track.title]\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"div\", null, [\n                                                            _cache[11] || (_cache[11] = _createElementVNode(\"label\", { class: \"mb-2 block text-sm font-bold text-stone-600 dark:text-stone-300\" }, \"歌手\", -1 /* CACHED */)),\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": ($event) => ((track.artist) = $event),\n                                                                type: \"text\",\n                                                                class: \"w-full appearance-none rounded-2xl bg-stone-50 px-5 py-4 text-base text-stone-800 transition-all outline-none placeholder:text-stone-400 focus:bg-white focus:ring-4 focus:ring-[#5C7F67]/20 dark:bg-stone-900 dark:text-stone-200 dark:focus:ring-[#5C7F67]/30\",\n                                                                placeholder: \"选填\"\n                                                            }, null, 8 /* PROPS */, _hoisted_13), [\n                                                                [_vModelText, track.artist]\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\" Cover \"),\n                                                    _createElementVNode(\"div\", null, [\n                                                        _cache[12] || (_cache[12] = _createElementVNode(\"label\", { class: \"mb-2 block text-sm font-bold text-stone-600 dark:text-stone-300\" }, \"封面图片链接\", -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": ($event) => ((track.cover) = $event),\n                                                            type: \"text\",\n                                                            class: \"w-full appearance-none rounded-2xl bg-stone-50 px-5 py-4 text-base text-stone-800 transition-all outline-none placeholder:text-stone-400 focus:bg-white focus:ring-4 focus:ring-[#5C7F67]/20 dark:bg-stone-900 dark:text-stone-200 dark:focus:ring-[#5C7F67]/30\",\n                                                            placeholder: \"https://... (选填)\"\n                                                        }, null, 8 /* PROPS */, _hoisted_14), [\n                                                            [_vModelText, track.cover]\n                                                        ])\n                                                    ])\n                                                ])\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]),\n                                    _: 1 /* STABLE */\n                                }),\n                                _createCommentVNode(\" 继续添加按钮 \"),\n                                _createElementVNode(\"button\", {\n                                    type: \"button\",\n                                    class: \"flex w-full items-center justify-center gap-3 rounded-3xl border-2 border-dashed border-stone-200 py-5 text-base font-bold text-stone-400 transition-all hover:border-[#5C7F67]/50 hover:bg-[#5C7F67]/5 hover:text-[#5C7F67] dark:border-stone-700 dark:hover:border-[#5C7F67] dark:hover:bg-[#5C7F67]/10 dark:hover:text-[#5C7F67]\",\n                                    onClick: addTrack\n                                }, [...(_cache[13] || (_cache[13] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\" 继续添加 \", -1 /* CACHED */)\n                                    ]))])\n                            ])\n                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                ], 512 /* NEED_PATCH */), [\n                    [_vShow, mode.value === 'structured']\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TrackInput.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TrackInput.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TrackInput.vue?vue&type=style&index=0&id=18cc96eb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-18cc96eb\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelSelect as _vModelSelect, Transition as _Transition, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = { class: \"flex h-full w-full flex-col bg-[#FDFCF8] px-6 pb-32 dark:bg-[#1c1917]\" };\nconst _hoisted_2 = { class: \"flex w-full items-center py-6\" };\nconst _hoisted_3 = { class: \"mx-auto w-full max-w-2xl space-y-12\" };\nconst _hoisted_4 = { class: \"text-3xl font-bold text-stone-800 dark:text-stone-100\" };\nconst _hoisted_5 = { class: \"flex w-full rounded-2xl bg-stone-100 p-1.5 dark:bg-stone-800\" };\nconst _hoisted_6 = { class: \"mt-3 text-base text-stone-500\" };\nconst _hoisted_7 = { class: \"flex w-full max-w-md rounded-2xl bg-stone-100 p-1.5 dark:bg-stone-800\" };\nconst _hoisted_8 = { class: \"mt-3 text-base whitespace-pre-line text-stone-500\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"overflow-hidden\"\n};\nconst _hoisted_10 = { class: \"rounded-3xl border border-stone-200 bg-stone-50/50 p-6 dark:border-stone-700 dark:bg-stone-800/30\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"space-y-8\"\n};\nconst _hoisted_12 = { class: \"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-4\" };\nconst _hoisted_13 = { class: \"space-y-3\" };\nconst _hoisted_14 = [\"onUpdate:modelValue\"];\nconst _hoisted_15 = { class: \"relative\" };\nconst _hoisted_16 = [\"onUpdate:modelValue\"];\nconst _hoisted_17 = [\"onUpdate:modelValue\"];\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = { class: \"space-y-6\" };\nconst _hoisted_20 = { class: \"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-4\" };\nconst _hoisted_21 = { class: \"mt-12 flex justify-center pb-8\" };\nimport { computed, watch } from 'vue';\nimport { generateUUID } from '../utils/id-generator';\nimport TrackInput from './TrackInput.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PlaylistEditor',\n    props: /*@__PURE__*/ _mergeModels({\n        targetType: {},\n        errors: {}\n    }, {\n        \"modelValue\": { required: true },\n        \"modelModifiers\": {},\n    }),\n    emits: /*@__PURE__*/ _mergeModels([\"back\"], [\"update:modelValue\"]),\n    setup(__props) {\n        const playlist = _useModel(__props, \"modelValue\");\n        // --- Computed ---\n        const currentType = computed(() => playlist.value.mvuConfig.type);\n        // [新增] 动态计算播放模式的解释文案\n        const finishRuleDescription = computed(() => {\n            const isBase = currentType.value === 'base';\n            const isLoop = playlist.value.onFinishRule === 'loop';\n            if (isBase) {\n                if (isLoop)\n                    return '只要没有满足条件的场景歌单，则循环播放基础歌单。';\n                return '只要没有满足条件的场景歌单，则播放基础歌单，播完歌单后停止播放。';\n            }\n            else {\n                // 场景歌单 (Scene)\n                if (isLoop) {\n                    return '当场景歌单满足条件时，循环播放，直到不再满足。\\n此时如有未播完或loop模式的基础歌单，则播放基础歌单。';\n                }\n                return '当场景歌单满足条件时播放，直到播完一次或不再满足条件。\\n此时如有未播完或loop模式的基础歌单，则播放基础歌单。';\n            }\n        });\n        // --- Methods ---\n        const setPlaylistType = (type) => {\n            playlist.value.mvuConfig.type = type;\n        };\n        const addMvuCondition = () => {\n            playlist.value.mvuConfig.conditions.push({\n                id: generateUUID(),\n                path: '',\n                operator: '等于',\n                value: '',\n            });\n        };\n        const removeMvuCondition = (index) => {\n            playlist.value.mvuConfig.conditions.splice(index, 1);\n        };\n        // --- Watchers ---\n        // 当切换到 'scene' 且没有条件时，自动添加一条空条件\n        watch(() => playlist.value.mvuConfig.type, newType => {\n            if (newType === 'scene' && playlist.value.mvuConfig.conditions.length === 0) {\n                addMvuCondition();\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 1. 顶部导航 \"),\n                _createElementVNode(\"header\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        type: \"button\",\n                        class: \"group flex items-center text-lg font-bold text-stone-500 transition-colors hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('back')))\n                    }, [...(_cache[14] || (_cache[14] = [\n                            _createElementVNode(\"div\", { class: \"mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-stone-100 transition-colors group-hover:bg-stone-200 dark:bg-stone-800 dark:group-hover:bg-stone-700\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-arrow-left text-sm\" })\n                            ], -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"保存并返回\", -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createCommentVNode(\" 2. 主表单流 \"),\n                _createElementVNode(\"main\", _hoisted_3, [\n                    _createCommentVNode(\" 标题区 \"),\n                    _createElementVNode(\"h1\", _hoisted_4, _toDisplayString(playlist.value.id || '编辑歌单'), 1 /* TEXT */),\n                    _createCommentVNode(\" Field 1: ID \"),\n                    _createElementVNode(\"div\", null, [\n                        _cache[15] || (_cache[15] = _createElementVNode(\"label\", { class: \"mb-3 block text-lg font-bold text-stone-700 dark:text-stone-200\" }, [\n                            _createTextVNode(\" 歌单 ID \"),\n                            _createElementVNode(\"span\", { class: \"text-rose-400\" }, \"*\")\n                        ], -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((playlist.value.id) = $event)),\n                            type: \"text\",\n                            class: \"w-full appearance-none rounded-2xl bg-stone-100 px-5 py-4 text-lg text-stone-800 transition-all outline-none placeholder:text-stone-400 focus:bg-white focus:ring-4 focus:ring-[#5C7F67]/20 dark:bg-stone-800 dark:text-stone-200 dark:focus:bg-stone-800 dark:focus:ring-[#5C7F67]/30\",\n                            placeholder: \"例如: battle_theme\"\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, playlist.value.id]\n                        ]),\n                        _cache[16] || (_cache[16] = _createElementVNode(\"p\", { class: \"mt-2 text-base text-stone-400\" }, \"唯一标识符，不可重复。\", -1 /* CACHED */))\n                    ]),\n                    _createCommentVNode(\" Field 2: 歌单类型 \"),\n                    _createElementVNode(\"div\", null, [\n                        _cache[17] || (_cache[17] = _createElementVNode(\"label\", { class: \"mb-3 block text-lg font-bold text-stone-700 dark:text-stone-200\" }, \" 歌单类型 \", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"button\", {\n                                type: \"button\",\n                                class: _normalizeClass([\"flex-1 rounded-xl py-3 text-base font-bold transition-all\",\n                                    currentType.value === 'base'\n                                        ? 'bg-white text-stone-800 shadow-sm dark:bg-stone-700 dark:text-stone-100'\n                                        : 'text-stone-500 hover:text-stone-700 dark:text-stone-400'\n                                ]),\n                                onClick: _cache[2] || (_cache[2] = ($event) => (setPlaylistType('base')))\n                            }, \" 基础歌单 \", 2 /* CLASS */),\n                            _createElementVNode(\"button\", {\n                                type: \"button\",\n                                class: _normalizeClass([\"flex-1 rounded-xl py-3 text-base font-bold transition-all\",\n                                    currentType.value === 'scene'\n                                        ? 'bg-white text-stone-800 shadow-sm dark:bg-stone-700 dark:text-stone-100'\n                                        : 'text-stone-500 hover:text-stone-700 dark:text-stone-400'\n                                ]),\n                                onClick: _cache[3] || (_cache[3] = ($event) => (setPlaylistType('scene')))\n                            }, \" 场景歌单 \", 2 /* CLASS */)\n                        ]),\n                        _createElementVNode(\"p\", _hoisted_6, _toDisplayString(currentType.value === 'base'\n                            ? '从开场白开始无条件播放的歌单，可作为默认背景音乐。'\n                            : '根据特定条件触发的歌单（如下雨、战斗、进入特定地点）。'), 1 /* TEXT */)\n                    ]),\n                    _createCommentVNode(\" Field 3: 播放模式 \"),\n                    _createElementVNode(\"div\", null, [\n                        _cache[18] || (_cache[18] = _createElementVNode(\"label\", { class: \"mb-3 block text-lg font-bold text-stone-700 dark:text-stone-200\" }, \" 播放模式 \", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _createElementVNode(\"button\", {\n                                type: \"button\",\n                                class: _normalizeClass([\"flex-1 rounded-xl py-3 text-base font-bold transition-all\",\n                                    playlist.value.onFinishRule === 'loop'\n                                        ? 'bg-white text-stone-800 shadow-sm dark:bg-stone-700 dark:text-stone-100'\n                                        : 'text-stone-500 hover:text-stone-700 dark:text-stone-400'\n                                ]),\n                                onClick: _cache[4] || (_cache[4] = ($event) => (playlist.value.onFinishRule = 'loop'))\n                            }, \" Loop (循环) \", 2 /* CLASS */),\n                            _createElementVNode(\"button\", {\n                                type: \"button\",\n                                class: _normalizeClass([\"flex-1 rounded-xl py-3 text-base font-bold transition-all\",\n                                    playlist.value.onFinishRule === 'pop'\n                                        ? 'bg-white text-stone-800 shadow-sm dark:bg-stone-700 dark:text-stone-100'\n                                        : 'text-stone-500 hover:text-stone-700 dark:text-stone-400'\n                                ]),\n                                onClick: _cache[5] || (_cache[5] = ($event) => (playlist.value.onFinishRule = 'pop'))\n                            }, \" Pop (播完即焚) \", 2 /* CLASS */)\n                        ]),\n                        _createCommentVNode(\" [新增] 解释说明文本 \"),\n                        _createCommentVNode(\" whitespace-pre-line 用于识别文案中的换行符 \\\\n \"),\n                        _createElementVNode(\"p\", _hoisted_8, _toDisplayString(finishRuleDescription.value), 1 /* TEXT */)\n                    ]),\n                    _createCommentVNode(\" Field 4: 歌曲列表 \"),\n                    _createElementVNode(\"div\", null, [\n                        _cache[19] || (_cache[19] = _createElementVNode(\"label\", { class: \"mb-3 block text-lg font-bold text-stone-700 dark:text-stone-200\" }, \" 歌曲列表 \", -1 /* CACHED */)),\n                        _createVNode(TrackInput, {\n                            mode: playlist.value.trackInputMode,\n                            \"onUpdate:mode\": _cache[6] || (_cache[6] = ($event) => ((playlist.value.trackInputMode) = $event)),\n                            raw: playlist.value.tracksRaw,\n                            \"onUpdate:raw\": _cache[7] || (_cache[7] = ($event) => ((playlist.value.tracksRaw) = $event)),\n                            structured: playlist.value.tracksStructured,\n                            \"onUpdate:structured\": _cache[8] || (_cache[8] = ($event) => ((playlist.value.tracksStructured) = $event))\n                        }, null, 8 /* PROPS */, [\"mode\", \"raw\", \"structured\"])\n                    ]),\n                    _createCommentVNode(\" Field 5: 场景触发配置 (仅 Scene 显示) \"),\n                    _createVNode(_Transition, { name: \"slide-down\" }, {\n                        default: _withCtx(() => [\n                            (currentType.value === 'scene')\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                    _createCommentVNode(\" 容器：淡雅外框 (Bg Stone 50 + Border Stone 200) \"),\n                                    _createElementVNode(\"div\", _hoisted_10, [\n                                        _cache[30] || (_cache[30] = _createElementVNode(\"h3\", { class: \"mb-6 flex items-center text-xl font-bold text-[#5C7F67] dark:text-[#5C7F67]\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-bolt mr-2\" }),\n                                            _createTextVNode(\" 触发配置 \")\n                                        ], -1 /* CACHED */)),\n                                        _createCommentVNode(\" A. MVU 模式 \"),\n                                        (__props.targetType === 'mvu')\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                                _createCommentVNode(\" 优先级 \"),\n                                                _createElementVNode(\"div\", null, [\n                                                    _cache[21] || (_cache[21] = _createElementVNode(\"label\", { class: \"mb-3 block text-base font-bold text-stone-700 dark:text-stone-300\" }, \" 优先级 \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_12, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((playlist.value.mvuConfig.priority) = $event)),\n                                                            type: \"number\",\n                                                            class: \"w-28 appearance-none rounded-2xl bg-white px-4 py-3 text-center text-lg font-bold text-stone-800 shadow-sm transition-all outline-none focus:ring-2 focus:ring-[#5C7F67]/30 dark:bg-stone-900 dark:text-stone-100\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                playlist.value.mvuConfig.priority,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ]),\n                                                        _cache[20] || (_cache[20] = _createElementVNode(\"span\", { class: \"text-base text-stone-500\" }, \"场景歌单的优先级。多个场景歌单满足条件时，播放优先级最高的歌曲。数字越大，优先级越高。\", -1 /* CACHED */))\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\" 触发条件列表 \"),\n                                                _createElementVNode(\"div\", null, [\n                                                    _createElementVNode(\"div\", { class: \"mb-4 flex items-center justify-between\" }, [\n                                                        _cache[22] || (_cache[22] = _createElementVNode(\"label\", { class: \"text-base font-bold text-stone-700 dark:text-stone-300\" }, \" 条件列表 (AND) \", -1 /* CACHED */)),\n                                                        _createElementVNode(\"button\", {\n                                                            type: \"button\",\n                                                            class: \"rounded-lg px-3 py-1 text-sm font-bold text-[#5C7F67] hover:bg-[#5C7F67]/10 dark:hover:bg-[#5C7F67]/20\",\n                                                            onClick: addMvuCondition\n                                                        }, \" + 添加条件 \")\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_13, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(playlist.value.mvuConfig.conditions, (cond, idx) => {\n                                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                                key: cond.id,\n                                                                class: \"flex flex-wrap items-center gap-3 rounded-2xl bg-white p-3 shadow-sm transition-all hover:shadow-md dark:bg-stone-900\"\n                                                            }, [\n                                                                _createCommentVNode(\" 变量路径 \"),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": ($event) => ((cond.path) = $event),\n                                                                    type: \"text\",\n                                                                    placeholder: \"如`角色.好感度`\",\n                                                                    class: \"min-w-[140px] flex-1 appearance-none rounded-xl bg-stone-50 px-4 py-3 text-base text-stone-800 outline-none placeholder:text-stone-400 focus:bg-white focus:ring-2 focus:ring-[#5C7F67]/30 dark:bg-stone-800 dark:text-stone-200\"\n                                                                }, null, 8 /* PROPS */, _hoisted_14), [\n                                                                    [_vModelText, cond.path]\n                                                                ]),\n                                                                _createCommentVNode(\" 操作符 (带自定义下拉图标) \"),\n                                                                _createElementVNode(\"div\", _hoisted_15, [\n                                                                    _withDirectives(_createElementVNode(\"select\", {\n                                                                        \"onUpdate:modelValue\": ($event) => ((cond.operator) = $event),\n                                                                        class: \"appearance-none rounded-xl bg-stone-50 py-3 pr-10 pl-4 text-base font-medium text-stone-800 outline-none focus:bg-white focus:ring-2 focus:ring-[#5C7F67]/30 dark:bg-stone-800 dark:text-stone-200\"\n                                                                    }, [...(_cache[23] || (_cache[23] = [\n                                                                            _createElementVNode(\"option\", null, \"等于\", -1 /* CACHED */),\n                                                                            _createElementVNode(\"option\", null, \"大于\", -1 /* CACHED */),\n                                                                            _createElementVNode(\"option\", null, \"大于等于\", -1 /* CACHED */),\n                                                                            _createElementVNode(\"option\", null, \"小于\", -1 /* CACHED */),\n                                                                            _createElementVNode(\"option\", null, \"小于等于\", -1 /* CACHED */),\n                                                                            _createElementVNode(\"option\", null, \"它的文字包含\", -1 /* CACHED */),\n                                                                            _createElementVNode(\"option\", null, \"时间范围是\", -1 /* CACHED */)\n                                                                        ]))], 8 /* PROPS */, _hoisted_16), [\n                                                                        [_vModelSelect, cond.operator]\n                                                                    ]),\n                                                                    _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-stone-400\" }, [\n                                                                        _createElementVNode(\"i\", { class: \"fas fa-chevron-down text-xs\" })\n                                                                    ], -1 /* CACHED */))\n                                                                ]),\n                                                                _createCommentVNode(\" 值 \"),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": ($event) => ((cond.value) = $event),\n                                                                    type: \"text\",\n                                                                    placeholder: \"值，如`20`\",\n                                                                    class: \"min-w-[100px] flex-1 appearance-none rounded-xl bg-stone-50 px-4 py-3 text-base text-stone-800 outline-none placeholder:text-stone-400 focus:bg-white focus:ring-2 focus:ring-[#5C7F67]/30 dark:bg-stone-800 dark:text-stone-200\"\n                                                                }, null, 8 /* PROPS */, _hoisted_17), [\n                                                                    [_vModelText, cond.value]\n                                                                ]),\n                                                                _createCommentVNode(\" 删除 \"),\n                                                                _createElementVNode(\"button\", {\n                                                                    type: \"button\",\n                                                                    class: \"px-3 text-stone-300 transition-colors hover:text-rose-400\",\n                                                                    onClick: ($event) => (removeMvuCondition(idx))\n                                                                }, [...(_cache[25] || (_cache[25] = [\n                                                                        _createElementVNode(\"i\", { class: \"fas fa-times text-lg\" }, null, -1 /* CACHED */)\n                                                                    ]))], 8 /* PROPS */, _hoisted_18)\n                                                            ]));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\" InitVar (参考) \"),\n                                                _createElementVNode(\"div\", null, [\n                                                    _cache[26] || (_cache[26] = _createElementVNode(\"label\", { class: \"mb-3 block text-base font-bold text-stone-700 dark:text-stone-300\" }, \" InitVar 参考 (选填) \", -1 /* CACHED */)),\n                                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                                        \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((playlist.value.mvuConfig.initVarRaw) = $event)),\n                                                        rows: \"3\",\n                                                        class: \"w-full appearance-none rounded-2xl bg-white px-5 py-4 text-base text-stone-600 shadow-sm transition-all outline-none placeholder:text-stone-300 focus:ring-2 focus:ring-[#5C7F67]/30 dark:bg-stone-900 dark:text-stone-300\",\n                                                        placeholder: \"在此粘贴 InitVar 内容，帮助 AI 理解变量结构...\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [_vModelText, playlist.value.mvuConfig.initVarRaw]\n                                                    ])\n                                                ])\n                                            ]))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\" B. Text 模式 \"),\n                                                _createElementVNode(\"div\", _hoisted_19, [\n                                                    _createElementVNode(\"div\", null, [\n                                                        _cache[28] || (_cache[28] = _createElementVNode(\"label\", { class: \"mb-3 block text-lg font-bold text-stone-700 dark:text-stone-200\" }, \" 优先级 \", -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_20, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((playlist.value.textConfig.priority) = $event)),\n                                                                type: \"number\",\n                                                                class: \"w-28 appearance-none rounded-2xl bg-white px-4 py-3 text-center text-lg font-bold text-stone-800 shadow-sm transition-all outline-none focus:ring-2 focus:ring-[#5C7F67]/30 dark:bg-stone-900 dark:text-stone-100\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [\n                                                                    _vModelText,\n                                                                    playlist.value.textConfig.priority,\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ]),\n                                                            _cache[27] || (_cache[27] = _createElementVNode(\"span\", { class: \"text-base text-stone-500\" }, \" 场景歌单的优先级。多个场景歌单满足条件时，播放优先级最高的歌曲。数字越大，优先级越高。 \", -1 /* CACHED */))\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", null, [\n                                                        _cache[29] || (_cache[29] = _createElementVNode(\"label\", { class: \"mb-3 block text-lg font-bold text-stone-700 dark:text-stone-200\" }, [\n                                                            _createTextVNode(\" 场景歌单播放条件 \"),\n                                                            _createElementVNode(\"span\", { class: \"text-rose-400\" }, \"*\")\n                                                        ], -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                                            \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((playlist.value.textConfig.sceneDescription) = $event)),\n                                                            rows: \"4\",\n                                                            class: \"w-full appearance-none rounded-2xl bg-white px-5 py-4 text-lg text-stone-700 shadow-sm transition-all outline-none placeholder:text-stone-300 focus:ring-2 focus:ring-[#5C7F67]/30 dark:bg-stone-900 dark:text-stone-200\",\n                                                            placeholder: \"例如：<user>进入/位于家中时。条件最好清晰、明确，不和其他歌单重叠。\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelText, playlist.value.textConfig.sceneDescription]\n                                                        ])\n                                                    ])\n                                                ])\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _: 1 /* STABLE */\n                    }),\n                    _createCommentVNode(\" 底部保存按钮 \"),\n                    _createElementVNode(\"div\", _hoisted_21, [\n                        _createElementVNode(\"button\", {\n                            type: \"button\",\n                            class: \"flex items-center rounded-full bg-[#6B8E78] px-10 py-3 text-lg font-bold text-white shadow-md transition-all hover:-translate-y-1 hover:bg-[#5C7F67] hover:shadow-lg active:translate-y-0 active:scale-95\",\n                            onClick: _cache[13] || (_cache[13] = ($event) => (_ctx.$emit('back')))\n                        }, [...(_cache[31] || (_cache[31] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-check mr-3\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" 保存 \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PlaylistEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PlaylistEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PlaylistEditor.vue?vue&type=style&index=0&id=66041832&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-66041832\"]])\n\nexport default __exports__","import { ProjectState, Playlist, StructuredTrack, MvuOperator } from '../types';\n\n/**\n * 映射表：前端中文操作符 -> 后端 YAML 键名\n */\nconst OPERATOR_MAP: Record<MvuOperator, string> = {\n  等于: 'value',\n  大于: 'greater_than',\n  大于等于: 'greater_than_or_equal_to',\n  小于: 'less_than',\n  小于等于: 'less_than_or_equal_to',\n  它的文字包含: 'value_contains',\n  时间范围是: 'time_in_range',\n};\n\n/**\n * 辅助函数：生成缩进\n */\nconst indent = (level: number) => '  '.repeat(level);\n\n/**\n * 格式化结构化歌曲列表为 YAML\n */\nfunction formatStructuredTracks(tracks: StructuredTrack[]): string {\n  if (tracks.length === 0) return '[]';\n\n  let yaml = 'tracks:\\n';\n  tracks.forEach(t => {\n    yaml += indent(1) + `- url: \"${t.url.trim()}\"\\n`;\n    if (t.title.trim()) yaml += indent(2) + `歌名: \"${t.title.trim()}\"\\n`;\n    if (t.artist.trim()) yaml += indent(2) + `歌手: \"${t.artist.trim()}\"\\n`;\n    if (t.cover.trim()) yaml += indent(2) + `封面: \"${t.cover.trim()}\"\\n`;\n  });\n  return yaml;\n}\n\n/**\n * 格式化 MVU 触发器为 YAML\n */\nfunction formatMvuConfig(playlist: Playlist): string {\n  const { priority, conditions } = playlist.mvuConfig;\n\n  // 过滤无效条件\n  const validConditions = conditions.filter(c => c.path.trim() && c.value.trim());\n\n  // 如果没有有效条件，但它是场景歌单，AI 依然需要知道它是场景歌单，只是条件为空\n  if (validConditions.length === 0) return '# (警告: 用户未设置有效触发条件)\\n';\n\n  let yaml = `[触发器配置 (已格式化-请直接采纳)]\\n`;\n  // 修正点1：补全 type 字段\n  yaml += `- type: mvu_variable\\n`;\n  // 修正点2：playlist_id 增加缩进以对齐\n  yaml += indent(1) + `playlist_id: ${playlist.id}\\n`;\n  yaml += indent(1) + `priority: ${priority}\\n`;\n  yaml += indent(1) + `conditions:\\n`;\n\n  validConditions.forEach(c => {\n    const yamlKey = OPERATOR_MAP[c.operator];\n    let val = c.value.trim();\n\n    // 修正点3：增加布尔值检测，true/false 也不加引号\n    const isNumber = /^-?\\d+(\\.\\d+)?$/.test(val);\n    const isBoolean = val === 'true' || val === 'false';\n    // 只有既不是数字，也不是布尔值，或者操作符特殊时，才加引号\n    const needsQuote = (!isNumber && !isBoolean) || c.operator === '它的文字包含' || c.operator === '时间范围是';\n\n    if (needsQuote) val = `\"${val}\"`;\n\n    yaml += indent(2) + `- variable_path: \"${c.path.trim()}\"\\n`;\n    yaml += indent(3) + `${yamlKey}: ${val}\\n`;\n  });\n\n  return yaml;\n}\n\n/**\n * 核心生成函数\n */\nexport function generatePrompt(state: ProjectState): string {\n  const { playlists, targetType, defaultPlaylistId } = state;\n  const isMvu = targetType === 'mvu';\n\n  // 1. Header (指令部分，不包裹在代码块中)\n  const header = `以下是用户的歌单配置信息。请你检查完整性，解析未格式化的歌曲文本，并输出最终的 YAML [MusicConfig] 配置。\\n\\n`;\n\n  // 2. Body (数据部分，包裹在代码块中)\n  let body = '```yaml\\n';\n\n  // --- 全局块 ---\n  body += `(全局配置)\\n`;\n  body += `运行模式: [is_mvu: ${isMvu}]\\n`;\n\n  // 只有在 ID 有效且属于当前列表时才写入\n  const defaultPlaylist = playlists.find(p => p.id === defaultPlaylistId);\n  const isValidDefault = defaultPlaylist && defaultPlaylist.mvuConfig.type === 'base';\n\n  if (isValidDefault && defaultPlaylistId) {\n    body += `默认基础歌单ID: ${defaultPlaylistId}\\n`;\n  } else {\n    body += `默认基础歌单ID: (无) - 用户未指定，不要设置默认歌单\\n`;\n  }\n  body += `\\n`;\n\n  // --- 歌单块 ---\n  playlists.forEach((p, index) => {\n    body += `=========================\\n`;\n    body += `【歌单 ${index + 1}】\\n`;\n\n    // A. 通用核心数据 (所有模式、所有类型都必须输出)\n    body += `ID: ${p.id}\\n`;\n    // 明确输出类型，即使是文字卡也要告诉 AI 这是“场景”还是“基础”\n    const typeLabel = p.mvuConfig.type === 'base' ? '基础歌单' : '场景歌单';\n    body += `类型: ${typeLabel}\\n`;\n    body += `结束规则: ${p.onFinishRule}\\n`;\n\n    // B. 歌曲数据\n    if (p.trackInputMode === 'structured') {\n      body += `\\n[歌曲列表 (已格式化-请直接采纳)]\\n`;\n      body += formatStructuredTracks(p.tracksStructured);\n    } else {\n      body += `\\n[歌曲列表 (原始文本-请解析为YAML)]\\n`;\n      body += (p.tracksRaw || '').trim() + `\\n`;\n    }\n\n    // C. 场景触发逻辑 (仅场景歌单需要)\n    if (p.mvuConfig.type === 'scene') {\n      if (isMvu) {\n        // MVU 模式: 输出 InitVar 和 触发器YAML\n        if (p.mvuConfig.initVarRaw && p.mvuConfig.initVarRaw.trim()) {\n          body += `\\n[InitVar (仅供参考变量结构)]\\n`;\n          body += p.mvuConfig.initVarRaw.trim() + `\\n`;\n        }\n        // 这里会调用 formatMvuConfig，它内部已经过滤了无效的触发器条目\n        body += `\\n` + formatMvuConfig(p);\n      } else {\n        // 文字模式: 输出情景描述\n        body += `\\n[情景描述]\\n`;\n\n        // [新增] 输出优先级 (如果旧存档没有优先级，默认为 10)\n        const prio = p.textConfig.priority ?? 10;\n        body += `优先级: ${prio}\\n`;\n\n        body += (p.textConfig.sceneDescription || '').trim() + `\\n`;\n      }\n    } else {\n      // 基础歌单\n      body += `\\n[触发条件]: 无 (作为基础背景音乐)\\n`;\n    }\n  });\n\n  body += `=========================\\n`;\n  body += '```'; // 代码块结束\n\n  return header + body;\n}\n","import { Playlist, TargetType, ValidationResult } from '../types';\n\n/**\n * 1. 基础格式校验 (实时反馈用)\n * 检查必填项是否为空，ID 格式是否正确\n */\nexport function validatePlaylistBasic(\n  playlist: Playlist,\n  existingIds: string[] = [], // 用于 ID 查重\n): ValidationResult {\n  const errors: Record<string, string> = {};\n\n  // ID 校验\n  if (!playlist.id || !playlist.id.trim()) {\n    errors['id'] = 'ID 不能为空';\n  } else if (existingIds.includes(playlist.id)) {\n    errors['id'] = 'ID 已被使用，请更换';\n  }\n\n  // 歌曲内容校验\n  if (playlist.trackInputMode === 'raw') {\n    if (!playlist.tracksRaw || !playlist.tracksRaw.trim()) {\n      errors['tracks'] = '请粘贴歌曲信息';\n    }\n  } else if (playlist.tracksStructured.length === 0) {\n    // 修正：合并 else { if } -> else if\n    errors['tracks'] = '请至少添加一首歌曲';\n  } else {\n    const hasEmptyUrl = playlist.tracksStructured.some(t => !t.url.trim());\n    if (hasEmptyUrl) {\n      errors['tracks'] = '存在未填写音频链接的歌曲';\n    }\n  }\n\n  return { isValid: Object.keys(errors).length === 0, errors };\n}\n\n/**\n * 2. 业务逻辑校验 (提交拦截用)\n * 检查场景配置是否完整\n */\nexport function validatePlaylistLogic(playlist: Playlist, targetType: TargetType): string[] {\n  const logicErrors: string[] = [];\n  const baseLabel = `歌单 \"${playlist.id || '未命名'}\"`;\n  const isScene = playlist.mvuConfig.type === 'scene';\n\n  if (isScene) {\n    if (targetType === 'mvu') {\n      // MVU 场景：必须有触发条件\n      const validConditions = playlist.mvuConfig.conditions.filter(c => c.path.trim() && c.value.trim());\n      if (validConditions.length === 0) {\n        logicErrors.push(`${baseLabel}: 作为 MVU 场景歌单，必须设置至少一个完整的触发条件`);\n      }\n    } else if (!playlist.textConfig.sceneDescription.trim()) {\n      // 修正：合并 else { if } -> else if\n      // Text 场景：必须有情景描述\n      logicErrors.push(`${baseLabel}: 作为场景歌单，必须填写“场景歌单播放条件”`);\n    }\n  }\n\n  // 基础歌单 (Base) 无需额外逻辑校验\n  return logicErrors;\n}\n\n/**\n * 3. 全局一致性校验 (最终生成前调用)\n */\nexport function validateGlobalState(\n  playlists: Playlist[],\n  targetType: TargetType,\n  defaultPlaylistId: string | null,\n): { passed: boolean; messages: string[] } {\n  const messages: string[] = [];\n\n  // A. 数量检查\n  if (playlists.length === 0) {\n    return { passed: false, messages: ['请至少创建一个歌单'] };\n  }\n\n  // B. 逐条检查\n  const allIds = playlists.map(p => p.id);\n\n  playlists.forEach(p => {\n    // 1. 基础格式 (排除自身的 ID 查重)\n    const otherIds = allIds.filter(id => id !== p.id);\n    const basic = validatePlaylistBasic(p, otherIds);\n\n    if (!basic.isValid) {\n      const errFields = Object.values(basic.errors).join('、');\n      messages.push(`歌单 \"${p.id || '未命名'}\" 格式错误: ${errFields}`);\n    }\n\n    // 2. 业务逻辑\n    const logicErrors = validatePlaylistLogic(p, targetType);\n    messages.push(...logicErrors);\n  });\n\n  // C. 默认歌单规则检查\n  if (defaultPlaylistId) {\n    const target = playlists.find(p => p.id === defaultPlaylistId);\n\n    if (!target) {\n      // 理论上 UI 不会允许选不存在的 ID，但防万一\n      messages.push(`设置的默认歌单 \"${defaultPlaylistId}\" 不存在`);\n    } else if (target.mvuConfig.type !== 'base') {\n      // 修正：合并 else { if } -> else if\n      // 强制规则：默认歌单必须是 Base 类型\n      messages.push(\n        `默认歌单 \"${target.id}\" 是场景歌单。只有“基础歌单”才能被设为默认背景音乐，请修改其类型或取消默认设置。`,\n      );\n    }\n  }\n\n  return {\n    passed: messages.length === 0,\n    messages,\n  };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, withModifiers as _withModifiers, TransitionGroup as _TransitionGroup, withCtx as _withCtx, createVNode as _createVNode, Transition as _Transition } from \"vue\";\nconst _hoisted_1 = { class: \"flex h-full w-full flex-col bg-[#FDFCF8] p-6 pb-20 dark:bg-[#1c1917]\" };\nconst _hoisted_2 = { class: \"flex w-full items-center justify-between py-4\" };\nconst _hoisted_3 = { class: \"flex items-center gap-4\" };\nconst _hoisted_4 = { class: \"hidden flex-col text-right sm:flex\" };\nconst _hoisted_5 = { class: \"text-sm font-bold text-[#5C7F67] dark:text-[#5C7F67]\" };\nconst _hoisted_6 = { class: \"flex w-full flex-1 flex-col\" };\nconst _hoisted_7 = { class: \"mx-auto flex w-full max-w-3xl flex-1 flex-col\" };\nconst _hoisted_8 = {\n    key: \"empty\",\n    class: \"flex flex-1 flex-col items-center justify-center py-20\"\n};\nconst _hoisted_9 = {\n    key: \"list\",\n    class: \"flex flex-col\"\n};\nconst _hoisted_10 = { class: \"mb-6 ml-2 text-2xl font-bold text-stone-700 dark:text-stone-200\" };\nconst _hoisted_11 = { class: \"ml-2 text-base font-normal text-stone-400\" };\nconst _hoisted_12 = { class: \"space-y-4\" };\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = { class: \"flex items-center gap-5\" };\nconst _hoisted_15 = { class: \"flex flex-col\" };\nconst _hoisted_16 = { class: \"text-lg font-bold text-stone-700 dark:text-stone-200\" };\nconst _hoisted_17 = { class: \"text-sm text-stone-400\" };\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = { class: \"mt-32 flex flex-col items-center\" };\nconst _hoisted_20 = { class: \"mb-8 w-full rounded-3xl bg-white p-8 shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] dark:bg-stone-800/50\" };\nconst _hoisted_21 = { class: \"mb-4 flex items-center gap-2\" };\nconst _hoisted_22 = { class: \"relative w-full max-w-md\" };\nconst _hoisted_23 = [\"value\"];\nconst _hoisted_24 = [\"value\"];\nconst _hoisted_25 = { class: \"w-full max-w-md scale-100 rounded-3xl bg-white p-8 shadow-2xl transition-all dark:bg-stone-800\" };\nconst _hoisted_26 = { class: \"flex justify-end\" };\nconst _hoisted_27 = { class: \"relative w-full max-w-md scale-100 rounded-3xl bg-white p-8 shadow-2xl transition-all dark:bg-stone-800\" };\nconst _hoisted_28 = { class: \"flex flex-col items-center text-center\" };\nconst _hoisted_29 = { class: \"flex w-full gap-4\" };\nimport { computed, ref } from 'vue';\nimport { generatePrompt } from '../utils/prompt-generator';\nimport { validateGlobalState } from '../utils/validator';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Dashboard',\n    props: {\n        state: {}\n    },\n    emits: [\"navigate\", \"create\", \"edit\", \"delete\", \"update:default-playlist\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // --- Local State ---\n        const showHelpModal = ref(false);\n        const showConfirmModal = ref(false); // 重命名为 ConfirmModal\n        // --- Computed ---\n        const isMvu = computed(() => props.state.targetType === 'mvu');\n        // --- Helpers ---\n        const getIconContainerClass = (playlist) => {\n            if (playlist.id === props.state.defaultPlaylistId) {\n                return 'bg-[#5C7F67]/10 text-[#5C7F67] dark:bg-[#5C7F67]/20';\n            }\n            return 'bg-stone-100 text-stone-400 dark:bg-stone-700 dark:text-stone-500';\n        };\n        const getIconClass = (playlist) => {\n            if (playlist.id === props.state.defaultPlaylistId)\n                return 'fa-home';\n            if (isMvu.value && playlist.mvuConfig.type === 'scene')\n                return 'fa-bolt';\n            return 'fa-music';\n        };\n        const getPlaylistTypeLabel = (playlist) => {\n            // 无论何种模式，都读取真实的类型字段\n            return playlist.mvuConfig.type === 'base' ? '基础歌单' : '场景歌单';\n        };\n        // --- Handlers ---\n        const onDefaultPlaylistChange = (event) => {\n            const val = event.target.value;\n            emit('update:default-playlist', val || null);\n        };\n        const handleSwitchMode = () => {\n            if (confirm('切换模式将清空所有‘场景歌单’的触发条件配置（歌曲列表会保留）。是否继续？')) {\n                emit('navigate', 'setup');\n            }\n        };\n        /**\n         * 步骤 1: 校验并弹出确认框\n         * 替代之前的 handleGenerate\n         */\n        const handleGenerateCheck = () => {\n            const result = validateGlobalState(props.state.playlists, props.state.targetType, props.state.defaultPlaylistId);\n            if (!result.passed) {\n                const errorMsg = `配置检查未通过：\\n\\n${result.messages.join('\\n')}`;\n                if (typeof toastr !== 'undefined')\n                    toastr.error('配置存在问题', '发送中断');\n                alert(errorMsg);\n                return;\n            }\n            // 校验通过，打开确认弹窗\n            showConfirmModal.value = true;\n        };\n        /**\n         * 步骤 2: 确认发送\n         * 在 Modal 点击“确认”后触发\n         */\n        const confirmSend = () => {\n            const promptText = generatePrompt(props.state);\n            try {\n                const command = `/send ${promptText} | /trigger`;\n                if (typeof triggerSlash === 'function') {\n                    triggerSlash(command);\n                    // 成功提示 (合并了之前的 Wait 文本)\n                    if (typeof toastr !== 'undefined') {\n                        toastr.success(`已将 ${props.state.playlists.length} 个歌单配置发送给 AI。请等待 AI 回复和指导后续操作。`, '发送成功', { timeOut: 4000 });\n                    }\n                }\n                else {\n                    console.error('triggerSlash not found');\n                    alert('环境错误：无法调用 triggerSlash。');\n                }\n            }\n            catch (e) {\n                console.error(e);\n                alert('发送指令时发生意外错误。');\n            }\n            finally {\n                // 无论成功失败，都关闭弹窗\n                showConfirmModal.value = false;\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 1. 顶部导航 \"),\n                _createElementVNode(\"header\", _hoisted_2, [\n                    _createCommentVNode(\" 左侧：返回首页 \"),\n                    _createElementVNode(\"button\", {\n                        type: \"button\",\n                        class: \"group flex items-center rounded-full px-4 py-2 text-sm font-bold text-stone-500 transition-all hover:bg-stone-100 hover:text-stone-800 dark:text-stone-400 dark:hover:bg-stone-800 dark:hover:text-stone-200\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('navigate', 'home')))\n                    }, [...(_cache[9] || (_cache[9] = [\n                            _createElementVNode(\"div\", { class: \"mr-2 flex h-6 w-6 items-center justify-center rounded-full bg-stone-200 transition-colors group-hover:bg-stone-300 dark:bg-stone-700 dark:group-hover:bg-stone-600\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-chevron-left text-[10px]\" })\n                            ], -1 /* CACHED */),\n                            _createTextVNode(\" 返回首页 \", -1 /* CACHED */)\n                        ]))]),\n                    _createCommentVNode(\" 右侧：模式切换 \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createCommentVNode(\" 当前模式指示 \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"text-xs font-bold tracking-wider text-stone-400 uppercase\" }, \"Current Mode\", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_5, _toDisplayString(isMvu.value ? 'MVU 变量卡' : '纯文字 / 传统卡'), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"button\", {\n                            type: \"button\",\n                            class: \"flex items-center rounded-full bg-white px-4 py-2 text-sm font-bold text-stone-600 shadow-sm transition-all hover:bg-stone-50 hover:text-stone-900 active:scale-95 dark:bg-stone-800 dark:text-stone-300 dark:hover:bg-stone-700\",\n                            onClick: handleSwitchMode\n                        }, [...(_cache[11] || (_cache[11] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-exchange-alt mr-2 text-xs\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" 切换模式 \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\" 2. 主内容区 (转场容器) \"),\n                _createElementVNode(\"main\", _hoisted_6, [\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _createVNode(_Transition, {\n                            name: \"fade-slide\",\n                            mode: \"out-in\"\n                        }, {\n                            default: _withCtx(() => [\n                                (__props.state.playlists.length === 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                                        _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-[#5C7F67]/10 text-4xl text-[#5C7F67] dark:bg-[#5C7F67]/20\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-music\" })\n                                        ], -1 /* CACHED */)),\n                                        _cache[14] || (_cache[14] = _createElementVNode(\"p\", { class: \"mb-8 text-lg font-medium text-stone-500 dark:text-stone-400\" }, \"这里还很安静，开始添加乐章吧\", -1 /* CACHED */)),\n                                        _createElementVNode(\"button\", {\n                                            type: \"button\",\n                                            class: \"flex items-center justify-center rounded-full bg-[#5C7F67] px-8 py-4 text-base font-bold text-white shadow-[0_10px_30px_-10px_rgba(92,127,103,0.4)] transition-all hover:-translate-y-1 hover:bg-[#4A6852] hover:shadow-[0_20px_40px_-10px_rgba(92,127,103,0.5)] active:translate-y-0 active:scale-95\",\n                                            onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('create')))\n                                        }, [...(_cache[12] || (_cache[12] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-plus mr-2\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" 新建第一个歌单 \", -1 /* CACHED */)\n                                            ]))])\n                                    ]))\n                                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                        _createCommentVNode(\" 标题 \"),\n                                        _createElementVNode(\"h2\", _hoisted_10, [\n                                            _cache[15] || (_cache[15] = _createTextVNode(\" 歌单列表 \", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_11, \"(\" + _toDisplayString(__props.state.playlists.length) + \")\", 1 /* TEXT */)\n                                        ]),\n                                        _createCommentVNode(\" 歌单列表 \"),\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _createVNode(_TransitionGroup, { name: \"list\" }, {\n                                                default: _withCtx(() => [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.state.playlists, (playlist) => {\n                                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: playlist._uuid,\n                                                            class: \"group relative flex w-full cursor-pointer items-center justify-between rounded-3xl bg-white p-5 shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] transition-all dark:hover:bg-stone-750 hover:-translate-y-1 hover:shadow-[0_15px_30px_-5px_rgba(0,0,0,0.08)] dark:bg-stone-800 dark:shadow-none\",\n                                                            onClick: ($event) => (_ctx.$emit('edit', playlist._uuid))\n                                                        }, [\n                                                            _createCommentVNode(\" 左侧信息 \"),\n                                                            _createElementVNode(\"div\", _hoisted_14, [\n                                                                _createElementVNode(\"div\", {\n                                                                    class: _normalizeClass([\"flex h-12 w-12 items-center justify-center rounded-full transition-colors\", getIconContainerClass(playlist)])\n                                                                }, [\n                                                                    _createElementVNode(\"i\", {\n                                                                        class: _normalizeClass(['fas', getIconClass(playlist)])\n                                                                    }, null, 2 /* CLASS */)\n                                                                ], 2 /* CLASS */),\n                                                                _createElementVNode(\"div\", _hoisted_15, [\n                                                                    _createElementVNode(\"span\", _hoisted_16, _toDisplayString(playlist.id || '未命名歌单'), 1 /* TEXT */),\n                                                                    _createElementVNode(\"span\", _hoisted_17, _toDisplayString(getPlaylistTypeLabel(playlist)), 1 /* TEXT */)\n                                                                ])\n                                                            ]),\n                                                            _createCommentVNode(\" 右侧删除 \"),\n                                                            _createElementVNode(\"button\", {\n                                                                type: \"button\",\n                                                                class: \"rounded-full p-3 text-stone-300 opacity-0 transition-all group-hover:opacity-100 hover:bg-rose-50 hover:text-rose-500 dark:hover:bg-rose-900/20\",\n                                                                onClick: _withModifiers(($event) => (_ctx.$emit('delete', playlist._uuid)), [\"stop\"])\n                                                            }, [...(_cache[16] || (_cache[16] = [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-trash-alt\" }, null, -1 /* CACHED */)\n                                                                ]))], 8 /* PROPS */, _hoisted_18)\n                                                        ], 8 /* PROPS */, _hoisted_13));\n                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                    _createCommentVNode(\" 列表末尾的新建按钮 \"),\n                                                    _createElementVNode(\"button\", {\n                                                        key: \"create-btn\",\n                                                        type: \"button\",\n                                                        class: \"flex w-full items-center justify-center rounded-3xl border-2 border-dashed border-stone-200 bg-transparent py-4 text-base font-bold text-stone-400 transition-all hover:border-[#5C7F67]/50 hover:bg-[#5C7F67]/5 hover:text-[#5C7F67] dark:border-stone-700 dark:hover:border-[#5C7F67] dark:hover:bg-[#5C7F67]/10 dark:hover:text-[#5C7F67]\",\n                                                        onClick: _cache[2] || (_cache[2] = ($event) => (_ctx.$emit('create')))\n                                                    }, [...(_cache[17] || (_cache[17] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-plus mr-2\" }, null, -1 /* CACHED */),\n                                                            _createTextVNode(\" 新建歌单 \", -1 /* CACHED */)\n                                                        ]))])\n                                                ]),\n                                                _: 1 /* STABLE */\n                                            })\n                                        ]),\n                                        _createCommentVNode(\" C. 全局配置与生成 \"),\n                                        _createElementVNode(\"div\", _hoisted_19, [\n                                            _createCommentVNode(\" 全局配置卡片 \"),\n                                            _createElementVNode(\"div\", _hoisted_20, [\n                                                _createElementVNode(\"div\", _hoisted_21, [\n                                                    _cache[19] || (_cache[19] = _createElementVNode(\"label\", { class: \"text-lg font-bold text-stone-700 dark:text-stone-200\" }, \" 默认背景音乐 (Default Playlist) \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"button\", {\n                                                        type: \"button\",\n                                                        class: \"text-stone-400 transition-colors hover:text-[#5C7F67]\",\n                                                        onClick: _cache[3] || (_cache[3] = ($event) => (showHelpModal.value = true))\n                                                    }, [...(_cache[18] || (_cache[18] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-question-circle text-lg\" }, null, -1 /* CACHED */)\n                                                        ]))])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_22, [\n                                                    _createElementVNode(\"select\", {\n                                                        value: __props.state.defaultPlaylistId || '',\n                                                        class: \"w-full appearance-none rounded-2xl bg-stone-50 px-5 py-4 text-base text-stone-700 ring-1 ring-stone-200 transition-all outline-none focus:bg-white focus:ring-2 focus:ring-[#5C7F67]/30 dark:bg-stone-800 dark:text-stone-200 dark:ring-stone-700\",\n                                                        onChange: onDefaultPlaylistChange\n                                                    }, [\n                                                        _cache[20] || (_cache[20] = _createElementVNode(\"option\", { value: \"\" }, \"(无)\", -1 /* CACHED */)),\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.state.playlists, (p) => {\n                                                            return (_openBlock(), _createElementBlock(\"option\", {\n                                                                key: p._uuid,\n                                                                value: p.id\n                                                            }, _toDisplayString(p.id || '未命名歌单'), 9 /* TEXT, PROPS */, _hoisted_24));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_23),\n                                                    _cache[21] || (_cache[21] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute inset-y-0 right-0 flex items-center px-5 text-stone-400\" }, [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-chevron-down text-xs\" })\n                                                    ], -1 /* CACHED */))\n                                                ]),\n                                                _cache[22] || (_cache[22] = _createElementVNode(\"p\", { class: \"mt-3 text-sm text-stone-500\" }, \"基础歌单才可以作为默认歌单。\", -1 /* CACHED */))\n                                            ]),\n                                            _createCommentVNode(\" 生成按钮 (点击后弹出确认框) \"),\n                                            _createElementVNode(\"button\", {\n                                                type: \"button\",\n                                                class: \"w-fit rounded-full bg-[#5C7F67] px-16 py-4 text-xl font-bold text-white shadow-[0_10px_30px_-5px_rgba(92,127,103,0.4)] transition-all hover:-translate-y-1 hover:bg-[#4A6852] hover:shadow-[0_20px_40px_-5px_rgba(92,127,103,0.5)] active:translate-y-0 active:scale-95\",\n                                                onClick: handleGenerateCheck\n                                            }, [...(_cache[23] || (_cache[23] = [\n                                                    _createTextVNode(\" 生成并发送给 AI \", -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", { class: \"fas fa-paper-plane ml-3\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ]))\n                            ]),\n                            _: 1 /* STABLE */\n                        })\n                    ])\n                ]),\n                _createCommentVNode(\" 3. 帮助模态窗 (Help Modal) \"),\n                _createVNode(_Transition, { name: \"fade\" }, {\n                    default: _withCtx(() => [\n                        (showHelpModal.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"fixed inset-0 z-50 flex items-center justify-center bg-stone-900/30 p-6 backdrop-blur-sm\",\n                                onClick: _cache[5] || (_cache[5] = _withModifiers(($event) => (showHelpModal.value = false), [\"self\"]))\n                            }, [\n                                _createElementVNode(\"div\", _hoisted_25, [\n                                    _cache[24] || (_cache[24] = _createElementVNode(\"h3\", { class: \"mb-4 text-xl font-bold text-stone-800 dark:text-stone-100\" }, \"关于默认背景音乐\", -1 /* CACHED */)),\n                                    _cache[25] || (_cache[25] = _createElementVNode(\"p\", { class: \"mb-8 text-base leading-relaxed text-stone-600 dark:text-stone-300\" }, \" 快速给所有开场白指定默认基础歌单，可在特定开场白使用<playlist:...>标签使用特定歌单取代默认歌单。 \", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_26, [\n                                        _createElementVNode(\"button\", {\n                                            type: \"button\",\n                                            class: \"rounded-full bg-[#5C7F67]/10 px-6 py-2 text-sm font-bold text-[#5C7F67] hover:bg-[#5C7F67]/20 dark:bg-[#5C7F67]/20 dark:text-[#5C7F67]\",\n                                            onClick: _cache[4] || (_cache[4] = ($event) => (showHelpModal.value = false))\n                                        }, \" 我知道了 \")\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" 4. 发送确认模态窗 (Confirmation Modal) \"),\n                _createVNode(_Transition, { name: \"fade\" }, {\n                    default: _withCtx(() => [\n                        (showConfirmModal.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"fixed inset-0 z-[60] flex items-center justify-center bg-stone-900/30 p-6 backdrop-blur-sm\",\n                                onClick: _cache[8] || (_cache[8] = _withModifiers(($event) => (showConfirmModal.value = false), [\"self\"]))\n                            }, [\n                                _createElementVNode(\"div\", _hoisted_27, [\n                                    _createCommentVNode(\" 关闭按钮 (右上角小 X) \"),\n                                    _createElementVNode(\"button\", {\n                                        type: \"button\",\n                                        class: \"absolute top-4 right-4 p-2 text-stone-400 hover:text-stone-600 dark:hover:text-stone-200\",\n                                        onClick: _cache[6] || (_cache[6] = ($event) => (showConfirmModal.value = false))\n                                    }, [...(_cache[26] || (_cache[26] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                        ]))]),\n                                    _createCommentVNode(\" 内容 \"),\n                                    _createElementVNode(\"div\", _hoisted_28, [\n                                        _createCommentVNode(\" 问号图标 \"),\n                                        _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"mb-5 flex h-16 w-16 items-center justify-center rounded-full bg-[#5C7F67]/10 text-2xl text-[#5C7F67]\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-paper-plane\" })\n                                        ], -1 /* CACHED */)),\n                                        _cache[28] || (_cache[28] = _createElementVNode(\"h3\", { class: \"mb-4 text-xl font-bold text-stone-800 dark:text-stone-100\" }, \"是否发送？\", -1 /* CACHED */)),\n                                        _createCommentVNode(\" 提示文本 (主要内容) \"),\n                                        _cache[29] || (_cache[29] = _createElementVNode(\"p\", { class: \"mb-8 text-base leading-relaxed text-stone-600 dark:text-stone-300\" }, [\n                                            _createTextVNode(\" 💡 建议使用 \"),\n                                            _createElementVNode(\"span\", { class: \"font-bold text-[#5C7F67]\" }, \"Default\"),\n                                            _createTextVNode(\" 预设，关掉不相关的世界书，并把黑棘世界书中含[🌲前端]的条目全部关闭。 \")\n                                        ], -1 /* CACHED */)),\n                                        _createCommentVNode(\" 按钮组 \"),\n                                        _createElementVNode(\"div\", _hoisted_29, [\n                                            _createCommentVNode(\" 取消按钮 \"),\n                                            _createElementVNode(\"button\", {\n                                                type: \"button\",\n                                                class: \"flex-1 rounded-full bg-stone-100 py-3 text-sm font-bold text-stone-600 transition-colors hover:bg-stone-200 dark:bg-stone-700 dark:text-stone-300 dark:hover:bg-stone-600\",\n                                                onClick: _cache[7] || (_cache[7] = ($event) => (showConfirmModal.value = false))\n                                            }, \" 取消 \"),\n                                            _createCommentVNode(\" 确认按钮 \"),\n                                            _createElementVNode(\"button\", {\n                                                type: \"button\",\n                                                class: \"flex-1 rounded-full bg-[#5C7F67] py-3 text-sm font-bold text-white shadow-md transition-transform hover:scale-105 hover:bg-[#4A6852] active:scale-95\",\n                                                onClick: confirmSend\n                                            }, \" 确认发送 \")\n                                        ])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Dashboard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Dashboard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Dashboard.vue?vue&type=style&index=0&id=03d421b6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-03d421b6\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"flex h-full w-full flex-col items-center bg-[#FDFCF8] p-6 transition-colors duration-500 dark:bg-[#1c1917]\" };\nconst _hoisted_2 = { class: \"flex w-full max-w-md flex-1 flex-col items-center justify-center\" };\nconst _hoisted_3 = { class: \"flex w-full flex-col gap-4\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Home',\n    emits: [\"start\", \"skin\"],\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 1. 核心内容区 (垂直居中，避免顶头) \"),\n                _createElementVNode(\"main\", _hoisted_2, [\n                    _createCommentVNode(\" 星球图标 (悬浮动画，无底色) \"),\n                    _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"animate-float mb-8 text-7xl select-none\" }, \"🪐\", -1 /* CACHED */)),\n                    _createCommentVNode(\" 标题组 \"),\n                    _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n                        class: \"fade-in-up mb-12 text-center\",\n                        style: { \"animation-delay\": \"100ms\" }\n                    }, [\n                        _createElementVNode(\"h1\", { class: \"mb-3 text-3xl font-bold tracking-tight text-stone-700 dark:text-stone-200\" }, \"欢迎降落黑棘星\"),\n                        _createElementVNode(\"p\", { class: \"text-base text-stone-400 dark:text-stone-500\" }, [\n                            _createTextVNode(\" 为你的角色卡打造沉浸式听觉体验。\"),\n                            _createElementVNode(\"br\"),\n                            _createTextVNode(\" 请选择一种方式开始你的旅程。 \")\n                        ])\n                    ], -1 /* CACHED */)),\n                    _createCommentVNode(\" 功能入口卡片组 (Action Tiles) \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createCommentVNode(\" 卡片 2: 批量配置 (原 Dashboard) \"),\n                        _createElementVNode(\"button\", {\n                            type: \"button\",\n                            class: \"fade-in-up group relative flex w-full items-center gap-5 rounded-2xl bg-white p-5 text-left shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] transition-all hover:-translate-y-1 hover:shadow-[0_10px_30px_-4px_rgba(92,127,103,0.15)] dark:bg-stone-800 dark:shadow-none\",\n                            style: { \"animation-delay\": \"200ms\" },\n                            onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('start')))\n                        }, [...(_cache[2] || (_cache[2] = [\n                                _createStaticVNode(\"<div class=\\\"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-[#5C7F67]/10 text-[#5C7F67] transition-transform group-hover:scale-110 dark:bg-[#5C7F67]/20\\\" data-v-140fcbca><i class=\\\"fas fa-layer-group text-lg\\\" data-v-140fcbca></i></div><div class=\\\"flex flex-col\\\" data-v-140fcbca><span class=\\\"text-base font-bold text-stone-700 group-hover:text-[#5C7F67] dark:text-stone-200 dark:group-hover:text-[#5C7F67]\\\" data-v-140fcbca> 开始创建歌单 </span><span class=\\\"text-xs text-stone-400\\\" data-v-140fcbca> 填写需求后交由AI生成配置 </span></div><div class=\\\"ml-auto text-stone-300 transition-transform group-hover:translate-x-1 group-hover:text-[#5C7F67]\\\" data-v-140fcbca><i class=\\\"fas fa-chevron-right\\\" data-v-140fcbca></i></div>\", 3)\n                            ]))]),\n                        _createCommentVNode(\" 卡片 3: 皮肤制作 \"),\n                        _createElementVNode(\"button\", {\n                            type: \"button\",\n                            class: \"fade-in-up group relative flex w-full items-center gap-5 rounded-2xl bg-white p-5 text-left shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] transition-all hover:-translate-y-1 hover:shadow-[0_10px_30px_-4px_rgba(92,127,103,0.15)] dark:bg-stone-800 dark:shadow-none\",\n                            style: { \"animation-delay\": \"400ms\" },\n                            onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('skin')))\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createStaticVNode(\"<div class=\\\"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-[#5C7F67]/10 text-[#5C7F67] transition-transform group-hover:scale-110 dark:bg-[#5C7F67]/20\\\" data-v-140fcbca><i class=\\\"fas fa-paint-brush text-lg\\\" data-v-140fcbca></i></div><div class=\\\"flex flex-col\\\" data-v-140fcbca><span class=\\\"text-base font-bold text-stone-700 group-hover:text-[#5C7F67] dark:text-stone-200 dark:group-hover:text-[#5C7F67]\\\" data-v-140fcbca> 制作播放器皮肤 </span><span class=\\\"text-xs text-stone-400\\\" data-v-140fcbca> 定制角色的专属播放器 </span></div><div class=\\\"ml-auto text-stone-300 transition-transform group-hover:translate-x-1 group-hover:text-[#5C7F67]\\\" data-v-140fcbca><i class=\\\"fas fa-chevron-right\\\" data-v-140fcbca></i></div>\", 3)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\" 2. 底部版权 (沉底，不重叠) \"),\n                _cache[6] || (_cache[6] = _createElementVNode(\"footer\", {\n                    class: \"fade-in-up mt-auto pt-10 pb-2 text-center\",\n                    style: { \"animation-delay\": \"600ms\" }\n                }, [\n                    _createElementVNode(\"p\", { class: \"text-[10px] font-medium tracking-[0.2em] text-stone-300 uppercase dark:text-stone-700\" }, \" Copyright © 荒行 \")\n                ], -1 /* CACHED */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Home.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=140fcbca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-140fcbca\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"flex h-full w-full flex-col bg-[#FDFCF8] p-6 transition-colors duration-500 dark:bg-[#1c1917]\" };\nconst _hoisted_2 = {\n    class: \"fade-in-up w-full py-4\",\n    style: { \"animation-delay\": \"0ms\" }\n};\nconst _hoisted_3 = { class: \"flex w-full flex-1 flex-col items-center justify-center pb-20\" };\nconst _hoisted_4 = { class: \"grid w-full max-w-4xl gap-8 md:grid-cols-2\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Setup',\n    emits: [\"back\", \"select\"],\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 1. 顶部导航 \"),\n                _createElementVNode(\"header\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        type: \"button\",\n                        class: \"group flex items-center rounded-full px-4 py-2 text-sm font-bold text-stone-500 transition-all hover:bg-stone-100 hover:text-stone-800 dark:text-stone-400 dark:hover:bg-stone-800 dark:hover:text-stone-200\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('back')))\n                    }, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"div\", { class: \"mr-2 flex h-6 w-6 items-center justify-center rounded-full bg-stone-200 transition-colors group-hover:bg-stone-300 dark:bg-stone-700 dark:group-hover:bg-stone-600\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-chevron-left text-[10px]\" })\n                            ], -1 /* CACHED */),\n                            _createTextVNode(\" 返回 \", -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createCommentVNode(\" 2. 核心选择区 \"),\n                _createElementVNode(\"main\", _hoisted_3, [\n                    _createCommentVNode(\" 标题组 \"),\n                    _cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n                        class: \"fade-in-up mb-12 text-center\",\n                        style: { \"animation-delay\": \"100ms\" }\n                    }, [\n                        _createElementVNode(\"h2\", { class: \"mb-3 text-2xl font-bold tracking-tight text-stone-700 dark:text-stone-200\" }, \"选择你的角色卡类型\"),\n                        _createElementVNode(\"p\", { class: \"text-base text-stone-400 dark:text-stone-500\" }, \"我们将根据卡片类型，为你提供最合适的配置工具。\")\n                    ], -1 /* CACHED */)),\n                    _createCommentVNode(\" 卡片网格 \"),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _createCommentVNode(\" 选项 A: MVU 卡 \"),\n                        _createElementVNode(\"button\", {\n                            type: \"button\",\n                            class: \"fade-in-up group relative flex w-full flex-col items-center rounded-3xl bg-white p-10 text-center shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] transition-all hover:-translate-y-2 hover:shadow-[0_20px_40px_-4px_rgba(92,127,103,0.15)] dark:bg-stone-800 dark:shadow-none\",\n                            style: { \"animation-delay\": \"200ms\" },\n                            onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('select', 'mvu')))\n                        }, [\n                            _createCommentVNode(\" 图标容器 \"),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"mb-8 flex h-24 w-24 items-center justify-center rounded-full bg-[#5C7F67]/10 text-4xl text-[#5C7F67] transition-transform duration-500 group-hover:scale-110 group-hover:rotate-6 dark:bg-[#5C7F67]/20\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-bolt\" })\n                            ], -1 /* CACHED */)),\n                            _createCommentVNode(\" 文本 \"),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"h3\", { class: \"mb-3 text-xl font-bold text-stone-700 group-hover:text-[#5C7F67] dark:text-stone-200 dark:group-hover:text-[#5C7F67]\" }, \" MVU 卡 \", -1 /* CACHED */)),\n                            _cache[6] || (_cache[6] = _createElementVNode(\"p\", { class: \"leading-relaxed text-stone-400 dark:text-stone-500\" }, [\n                                _createTextVNode(\" 不涉及 AI 判断\"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" 可根据变量变化切换歌单 \")\n                            ], -1 /* CACHED */)),\n                            _createCommentVNode(\" 底部装饰条 (Hover时显现) \"),\n                            _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"absolute bottom-0 h-1.5 w-1/3 rounded-t-full bg-[#5C7F67] opacity-0 transition-opacity duration-300 group-hover:opacity-100\" }, null, -1 /* CACHED */))\n                        ]),\n                        _createCommentVNode(\" 选项 B: 非 MVU 卡 \"),\n                        _createElementVNode(\"button\", {\n                            type: \"button\",\n                            class: \"fade-in-up group relative flex w-full flex-col items-center rounded-3xl bg-white p-10 text-center shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] transition-all hover:-translate-y-2 hover:shadow-[0_20px_40px_-4px_rgba(92,127,103,0.15)] dark:bg-stone-800 dark:shadow-none\",\n                            style: { \"animation-delay\": \"300ms\" },\n                            onClick: _cache[2] || (_cache[2] = ($event) => (_ctx.$emit('select', 'text')))\n                        }, [\n                            _createCommentVNode(\" 图标容器 \"),\n                            _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"mb-8 flex h-24 w-24 items-center justify-center rounded-full bg-[#5C7F67]/10 text-4xl text-[#5C7F67] transition-transform duration-500 group-hover:scale-110 group-hover:-rotate-3 dark:bg-[#5C7F67]/20\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-book-open\" })\n                            ], -1 /* CACHED */)),\n                            _createCommentVNode(\" 文本 \"),\n                            _cache[9] || (_cache[9] = _createElementVNode(\"h3\", { class: \"mb-3 text-xl font-bold text-stone-700 group-hover:text-[#5C7F67] dark:text-stone-200 dark:group-hover:text-[#5C7F67]\" }, \" 非 MVU 卡 \", -1 /* CACHED */)),\n                            _cache[10] || (_cache[10] = _createElementVNode(\"p\", { class: \"leading-relaxed text-stone-400 dark:text-stone-500\" }, [\n                                _createTextVNode(\" 适合自然语言\"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" 由 AI 判断切换歌单 \")\n                            ], -1 /* CACHED */)),\n                            _createCommentVNode(\" 底部装饰条 (Hover时显现) \"),\n                            _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"absolute bottom-0 h-1.5 w-1/3 rounded-t-full bg-[#5C7F67] opacity-0 transition-opacity duration-300 group-hover:opacity-100\" }, null, -1 /* CACHED */))\n                        ])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Setup.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Setup.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Setup.vue?vue&type=style&index=0&id=507b5819&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-507b5819\"]])\n\nexport default __exports__","import { SkinConfig } from '../types';\n\n/**\n * 组件 ID 到中文描述的映射表\n * 用于告诉 AI 用户具体想删掉哪个部件\n */\nconst COMPONENT_MAP: Record<string, string> = {\n  cover: '歌曲独立封面',\n  title: '歌曲名',\n  artist: '歌手名',\n  progress: '播放进度条',\n  time: '当前/总时长',\n  mode: '播放模式切换按钮',\n  volume: '音量控制',\n  controls: '上一首/下一首按钮',\n  playlist: '歌单列表',\n};\n\n/**\n * 生成皮肤制作的 Prompt\n * 核心原则：只发送用户明确填写的内容，留白处让 AI 自由发挥\n */\nexport function generateSkinPrompt(config: SkinConfig): string {\n  // 1. 基础指令\n  let prompt = '请为我编写一个 SillyTavern 的前端播放器界面。\\n';\n  prompt +=\n    '严格基于 <MUSICPLAYER_FRONTEND_DEV> 开发规范，产出完整的代码块 `<html>` 结构，包含 `<head>` 和 `<body>`。\\n\\n';\n\n  // 2. 组件删减 (只列出用户【不需要】的)\n  if (config.excludedComponents.length > 0) {\n    prompt += '【功能删减 (以下组件请务必在界面中移除)】\\n';\n    config.excludedComponents.forEach(id => {\n      const name = COMPONENT_MAP[id] || id;\n      prompt += `- 不显示: ${name}\\n`;\n    });\n    prompt += '\\n';\n  }\n\n  // 3. 核心隐喻 (只列出用户填写的)\n  let metaphorSection = '';\n  const { entity, texture, dynamics, visualRef } = config.metaphor;\n\n  if (entity && entity.trim()) metaphorSection += `- 核心/实体概念: ${entity.trim()}\\n`;\n  if (texture && texture.trim()) metaphorSection += `- 材质与触感: ${texture.trim()}\\n`;\n  if (dynamics && dynamics.trim()) metaphorSection += `- 交互动态: ${dynamics.trim()}\\n`;\n  if (visualRef && visualRef.trim()) metaphorSection += `- 致敬/参考: ${visualRef.trim()}\\n`;\n\n  if (metaphorSection) {\n    prompt += '【设计隐喻】\\n' + metaphorSection + '\\n';\n  }\n\n  // 4. 视觉关键词\n  if (config.styleKeywords.length > 0) {\n    prompt += '【视觉风格关键词】\\n';\n    prompt += config.styleKeywords.join(', ') + '\\n\\n';\n  }\n\n  // 5. 自由描述\n  if (config.freeformRequirements && config.freeformRequirements.trim()) {\n    prompt += '【详细需求与补充】\\n';\n    prompt += config.freeformRequirements.trim() + '\\n';\n  }\n\n  return prompt;\n}\n","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"flex h-full w-full flex-col bg-[#FDFCF8] px-6 pb-32 transition-colors duration-500 dark:bg-[#1c1917]\" };\nconst _hoisted_2 = { class: \"flex w-full items-center py-6\" };\nconst _hoisted_3 = { class: \"mx-auto w-full max-w-3xl space-y-16 pt-4\" };\nconst _hoisted_4 = { class: \"space-y-8\" };\nconst _hoisted_5 = { class: \"grid grid-cols-2 gap-4 sm:grid-cols-3\" };\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = { class: \"space-y-12\" };\nconst _hoisted_8 = { class: \"space-y-4\" };\nconst _hoisted_9 = { class: \"space-y-4\" };\nconst _hoisted_10 = { class: \"space-y-4\" };\nconst _hoisted_11 = { class: \"space-y-4\" };\nconst _hoisted_12 = { class: \"space-y-8\" };\nconst _hoisted_13 = { class: \"space-y-6\" };\nconst _hoisted_14 = { class: \"flex flex-wrap gap-2\" };\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = { class: \"flex flex-wrap gap-2\" };\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = { class: \"flex flex-wrap gap-2\" };\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = { class: \"space-y-6\" };\nconst _hoisted_21 = { class: \"w-full max-w-md rounded-3xl bg-white p-8 shadow-2xl dark:bg-stone-800\" };\nconst _hoisted_22 = { class: \"flex gap-4\" };\nimport { ref } from 'vue';\nimport { generateSkinPrompt } from '../utils/skin-prompt-generator';\n// Emits\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SkinSetup',\n    props: {\n        \"skinConfig\": { required: true },\n        \"skinConfigModifiers\": {},\n    },\n    emits: /*@__PURE__*/ _mergeModels([\"back\"], [\"update:skinConfig\"]),\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        // Model\n        const skinConfig = _useModel(__props, 'skinConfig');\n        // Local State\n        const showConfirmModal = ref(false);\n        // Options Data\n        // 按照用户要求的顺序和解释重新整理\n        const componentOptions = [\n            {\n                id: 'cover',\n                label: '歌曲封面',\n                desc: '每首歌曲单独的封面图，需要在歌单配置中填写封面链接。',\n            },\n            { id: 'title', label: '歌曲名' },\n            { id: 'artist', label: '歌手名' },\n            { id: 'progress', label: '进度条' },\n            { id: 'time', label: '当前/总时长' },\n            {\n                id: 'mode',\n                label: '播放模式切换',\n                desc: '列表/单曲/随机',\n            },\n            { id: 'volume', label: '音量' },\n            { id: 'controls', label: '上一首/下一首' },\n            {\n                id: 'playlist',\n                label: '歌单列表',\n                desc: '查看当前播放的歌单',\n            },\n        ];\n        // 视觉基因分类\n        const styleGroups = {\n            genre: ['极简主义', '新拟态', '玻璃拟态', '赛博朋克', '蒸汽波', 'Y2K', '像素艺术', '杂志排版'],\n            texture: ['噪点/颗粒', '扫描线', '半调网点', '纸质', '网格'],\n            fx: ['色差', '故障艺术', '晕影', '高斯模糊', '倒置/负片', '抖动', '打字机效果'],\n        };\n        // Logic\n        const isExcluded = (id) => skinConfig.value.excludedComponents.includes(id);\n        const toggleComponent = (id) => {\n            const list = skinConfig.value.excludedComponents;\n            const idx = list.indexOf(id);\n            if (idx === -1) {\n                // 当前不在排除列表（即当前是“选中/保留”状态），用户想移除它\n                list.push(id);\n            }\n            else {\n                // 当前在排除列表（即当前是“未选中/移除”状态），用户想保留它\n                list.splice(idx, 1);\n            }\n        };\n        const toggleStyleKeyword = (tag) => {\n            const list = skinConfig.value.styleKeywords;\n            const idx = list.indexOf(tag);\n            if (idx === -1) {\n                list.push(tag);\n            }\n            else {\n                list.splice(idx, 1);\n            }\n        };\n        const handleGenerate = () => {\n            showConfirmModal.value = true;\n        };\n        const confirmSend = () => {\n            try {\n                const prompt = generateSkinPrompt(skinConfig.value);\n                const command = `/send ${prompt} | /trigger`;\n                if (typeof triggerSlash === 'function') {\n                    triggerSlash(command);\n                    if (typeof toastr !== 'undefined') {\n                        toastr.success('已发送皮肤设计需求，请等待 AI 绘制。', '发送成功');\n                    }\n                }\n                else {\n                    alert('无法调用 triggerSlash，请在酒馆环境中运行。');\n                }\n            }\n            catch (e) {\n                console.error(e);\n                alert('发送过程中出错。');\n            }\n            finally {\n                showConfirmModal.value = false;\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 1. 顶部导航 \"),\n                _createElementVNode(\"header\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        type: \"button\",\n                        class: \"group flex items-center text-lg font-bold text-stone-500 transition-colors hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('back')))\n                    }, [...(_cache[8] || (_cache[8] = [\n                            _createElementVNode(\"div\", { class: \"mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-stone-100 transition-colors group-hover:bg-stone-200 dark:bg-stone-800 dark:group-hover:bg-stone-700\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-arrow-left text-sm\" })\n                            ], -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"返回首页\", -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createElementVNode(\"main\", _hoisted_3, [\n                    _createCommentVNode(\" 标题区 (重构：作为主视觉核心) \"),\n                    _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"text-center\" }, [\n                        _createElementVNode(\"h2\", { class: \"text-3xl leading-relaxed font-bold text-stone-700 dark:text-stone-200\" }, [\n                            _createTextVNode(\" 以下内容均为引导，\"),\n                            _createElementVNode(\"br\", { class: \"hidden sm:block\" }),\n                            _createTextVNode(\" 选填选择有想法的内容即可。 \")\n                        ])\n                    ], -1 /* CACHED */)),\n                    _createCommentVNode(\" 板块 1: 组件构成 (重构：Grid布局 + 正向选择逻辑) \"),\n                    _createElementVNode(\"section\", _hoisted_4, [\n                        _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"border-b border-stone-200 pb-2 dark:border-stone-800\" }, [\n                            _createElementVNode(\"h3\", { class: \"text-xl font-bold text-stone-700 dark:text-stone-200\" }, \"1. 组件构成\")\n                        ], -1 /* CACHED */)),\n                        _createCommentVNode(\" Grid 布局 \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            (_openBlock(), _createElementBlock(_Fragment, null, _renderList(componentOptions, (comp) => {\n                                return _createElementVNode(\"button\", {\n                                    key: comp.id,\n                                    type: \"button\",\n                                    class: _normalizeClass([\"group relative flex flex-col items-start justify-center rounded-2xl border px-5 py-4 text-left transition-all duration-200\",\n                                        !isExcluded(comp.id)\n                                            ? 'border-[#5C7F67]/30 bg-[#5C7F67]/10 shadow-sm dark:border-[#5C7F67]/30 dark:bg-[#5C7F67]/20'\n                                            : 'border-transparent bg-stone-100 hover:bg-stone-200 dark:bg-stone-800 dark:hover:bg-stone-700'\n                                    ]),\n                                    onClick: ($event) => (toggleComponent(comp.id))\n                                }, [\n                                    _createCommentVNode(\" 主要标签 \"),\n                                    _createElementVNode(\"span\", {\n                                        class: _normalizeClass([\"text-base font-bold transition-colors\",\n                                            !isExcluded(comp.id) ? 'text-[#3A5241] dark:text-[#8AB096]' : 'text-stone-400 dark:text-stone-500'\n                                        ])\n                                    }, _toDisplayString(comp.label), 3 /* TEXT, CLASS */),\n                                    _createCommentVNode(\" 解释说明 (如果有) \"),\n                                    (comp.desc)\n                                        ? (_openBlock(), _createElementBlock(\"span\", {\n                                            key: 0,\n                                            class: _normalizeClass([\"mt-1 text-xs leading-tight font-medium transition-colors\",\n                                                !isExcluded(comp.id)\n                                                    ? 'text-[#5C7F67] opacity-80 dark:text-[#5C7F67]'\n                                                    : 'text-stone-300 dark:text-stone-600'\n                                            ])\n                                        }, _toDisplayString(comp.desc), 3 /* TEXT, CLASS */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\" 选中状态指示器 (右上角圆点) \"),\n                                    _createElementVNode(\"div\", {\n                                        class: _normalizeClass([\"absolute top-3 right-3 h-2 w-2 rounded-full transition-colors\", !isExcluded(comp.id) ? 'bg-[#5C7F67]' : 'bg-transparent'])\n                                    }, null, 2 /* CLASS */)\n                                ], 10 /* CLASS, PROPS */, _hoisted_6);\n                            }), 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ]),\n                    _createCommentVNode(\" 板块 2: 核心隐喻 (重构：增加间距，优化输入框视觉) \"),\n                    _createElementVNode(\"section\", _hoisted_7, [\n                        _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"border-b border-stone-200 pb-2 dark:border-stone-800\" }, [\n                            _createElementVNode(\"h3\", { class: \"text-xl font-bold text-stone-700 dark:text-stone-200\" }, \"2. 想法引导\")\n                        ], -1 /* CACHED */)),\n                        _createCommentVNode(\" 问题 1: 实体 \"),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _cache[10] || (_cache[10] = _createElementVNode(\"label\", { class: \"block text-lg font-bold text-stone-700 dark:text-stone-200\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-cube mr-2 text-[#5C7F67] opacity-80\" }),\n                                _createTextVNode(\" 这个播放器是有实体的吗？如果角色世界中的实体物品，它是什么？ \")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((skinConfig.value.metaphor.entity) = $event)),\n                                type: \"text\",\n                                class: \"w-full border-b border-stone-200 bg-transparent px-2 py-2 text-base text-stone-800 transition-colors placeholder:text-sm placeholder:text-stone-300 focus:border-[#5C7F67] focus:outline-none dark:border-stone-700 dark:text-stone-200 dark:placeholder:text-stone-600\",\n                                placeholder: \"例如: 90年代随身听 / 时尚杂志 / 羊皮纸卷轴 / 终端机...\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, skinConfig.value.metaphor.entity]\n                            ]),\n                            _cache[11] || (_cache[11] = _createElementVNode(\"p\", { class: \"text-sm text-stone-400\" }, \"如果它不是实体，也可以在这里描述它的概念。\", -1 /* CACHED */))\n                        ]),\n                        _createCommentVNode(\" 问题 2: 材质 \"),\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _cache[12] || (_cache[12] = _createElementVNode(\"label\", { class: \"block text-lg font-bold text-stone-700 dark:text-stone-200\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-fingerprint mr-2 text-[#5C7F67] opacity-80\" }),\n                                _createTextVNode(\" 如果你能摸到这个界面，它的手感是怎样的？ \")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((skinConfig.value.metaphor.texture) = $event)),\n                                type: \"text\",\n                                class: \"w-full border-b border-stone-200 bg-transparent px-2 py-2 text-base text-stone-800 transition-colors placeholder:text-sm placeholder:text-stone-300 focus:border-[#5C7F67] focus:outline-none dark:border-stone-700 dark:text-stone-200 dark:placeholder:text-stone-600\",\n                                placeholder: \"例如: 破损屏幕 / 磨砂玻璃 / 牛皮纸 / 拉丝金属...\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, skinConfig.value.metaphor.texture]\n                            ])\n                        ]),\n                        _createCommentVNode(\" 问题 3: 动态 \"),\n                        _createElementVNode(\"div\", _hoisted_10, [\n                            _cache[13] || (_cache[13] = _createElementVNode(\"label\", { class: \"block text-lg font-bold text-stone-700 dark:text-stone-200\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-wind mr-2 text-[#5C7F67] opacity-80\" }),\n                                _createTextVNode(\" 这个界面的交互动态是什么样的？ \")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((skinConfig.value.metaphor.dynamics) = $event)),\n                                type: \"text\",\n                                class: \"w-full border-b border-stone-200 bg-transparent px-2 py-2 text-base text-stone-800 transition-colors placeholder:text-sm placeholder:text-stone-300 focus:border-[#5C7F67] focus:outline-none dark:border-stone-700 dark:text-stone-200 dark:placeholder:text-stone-600\",\n                                placeholder: \"例如: 缓慢优雅 / 故障闪烁 / Q弹果冻...\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, skinConfig.value.metaphor.dynamics]\n                            ])\n                        ]),\n                        _createCommentVNode(\" 问题 4: 致敬 \"),\n                        _createElementVNode(\"div\", _hoisted_11, [\n                            _cache[14] || (_cache[14] = _createElementVNode(\"label\", { class: \"block text-lg font-bold text-stone-700 dark:text-stone-200\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-eye mr-2 text-[#5C7F67] opacity-80\" }),\n                                _createTextVNode(\" 视觉参考 (致敬作品/游戏UI/现实产品) \")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((skinConfig.value.metaphor.visualRef) = $event)),\n                                type: \"text\",\n                                class: \"w-full border-b border-stone-200 bg-transparent px-2 py-2 text-base text-stone-800 transition-colors placeholder:text-sm placeholder:text-stone-300 focus:border-[#5C7F67] focus:outline-none dark:border-stone-700 dark:text-stone-200 dark:placeholder:text-stone-600\",\n                                placeholder: \"例如: 《尼尔：自动人形》 / 《女神异闻录》 /Windows 98 / 复古黑胶...\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, skinConfig.value.metaphor.visualRef]\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" 板块 3: 视觉基因 (重构：分类显示) \"),\n                    _createElementVNode(\"section\", _hoisted_12, [\n                        _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"border-b border-stone-200 pb-2 dark:border-stone-800\" }, [\n                            _createElementVNode(\"h3\", { class: \"text-xl font-bold text-stone-700 dark:text-stone-200\" }, \"3. 视觉基因\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_13, [\n                            _createCommentVNode(\" Group 1: 风格流派 \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[16] || (_cache[16] = _createElementVNode(\"h4\", { class: \"mb-3 text-sm font-bold text-stone-400 dark:text-stone-500\" }, \"风格流派\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(styleGroups.genre, (tag) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: tag,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"rounded-full px-4 py-1.5 text-sm font-medium transition-all duration-200\",\n                                                skinConfig.value.styleKeywords.includes(tag)\n                                                    ? 'bg-[#5C7F67] text-white shadow-md'\n                                                    : 'bg-stone-100 text-stone-500 hover:bg-stone-200 dark:bg-stone-800 dark:text-stone-400 dark:hover:bg-stone-700'\n                                            ]),\n                                            onClick: ($event) => (toggleStyleKeyword(tag))\n                                        }, _toDisplayString(tag), 11 /* TEXT, CLASS, PROPS */, _hoisted_15));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Group 2: 材质纹理 \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[17] || (_cache[17] = _createElementVNode(\"h4\", { class: \"mb-3 text-sm font-bold text-stone-400 dark:text-stone-500\" }, \"材质纹理\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_16, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(styleGroups.texture, (tag) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: tag,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"rounded-full px-4 py-1.5 text-sm font-medium transition-all duration-200\",\n                                                skinConfig.value.styleKeywords.includes(tag)\n                                                    ? 'bg-[#5C7F67] text-white shadow-md'\n                                                    : 'bg-stone-100 text-stone-500 hover:bg-stone-200 dark:bg-stone-800 dark:text-stone-400 dark:hover:bg-stone-700'\n                                            ]),\n                                            onClick: ($event) => (toggleStyleKeyword(tag))\n                                        }, _toDisplayString(tag), 11 /* TEXT, CLASS, PROPS */, _hoisted_17));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Group 3: 特效滤镜 \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[18] || (_cache[18] = _createElementVNode(\"h4\", { class: \"mb-3 text-sm font-bold text-stone-400 dark:text-stone-500\" }, \"特效滤镜\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(styleGroups.fx, (tag) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: tag,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"rounded-full px-4 py-1.5 text-sm font-medium transition-all duration-200\",\n                                                skinConfig.value.styleKeywords.includes(tag)\n                                                    ? 'bg-[#5C7F67] text-white shadow-md'\n                                                    : 'bg-stone-100 text-stone-500 hover:bg-stone-200 dark:bg-stone-800 dark:text-stone-400 dark:hover:bg-stone-700'\n                                            ]),\n                                            onClick: ($event) => (toggleStyleKeyword(tag))\n                                        }, _toDisplayString(tag), 11 /* TEXT, CLASS, PROPS */, _hoisted_19));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" 板块 4: 自由描述 \"),\n                    _createElementVNode(\"section\", _hoisted_20, [\n                        _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"border-b border-stone-200 pb-2 dark:border-stone-800\" }, [\n                            _createElementVNode(\"h3\", { class: \"text-xl font-bold text-stone-700 dark:text-stone-200\" }, \"4. 需求描述区\")\n                        ], -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"textarea\", {\n                            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((skinConfig.value.freeformRequirements) = $event)),\n                            rows: \"5\",\n                            class: \"w-full appearance-none rounded-2xl bg-stone-100 p-5 text-base text-stone-700 shadow-inner transition-all outline-none placeholder:text-sm placeholder:text-stone-400 focus:bg-white focus:ring-2 focus:ring-[#5C7F67]/30 dark:bg-stone-800 dark:text-stone-300 dark:placeholder:text-stone-500\",\n                            placeholder: \"在这里写下任何其他要求。\\n例如: 色调倾向、字体要求、具体的素材图片链接...\"\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, skinConfig.value.freeformRequirements]\n                        ])\n                    ]),\n                    _createCommentVNode(\" 底部生成按钮 \"),\n                    _createElementVNode(\"div\", { class: \"flex justify-center pt-8\" }, [\n                        _createElementVNode(\"button\", {\n                            type: \"button\",\n                            class: \"group flex items-center rounded-full bg-[#5C7F67] px-12 py-4 text-xl font-bold text-white shadow-[0_10px_30px_-5px_rgba(92,127,103,0.4)] transition-all hover:-translate-y-1 hover:bg-[#4A6852] hover:shadow-[0_20px_40px_-5px_rgba(92,127,103,0.5)] active:translate-y-0 active:scale-95\",\n                            onClick: handleGenerate\n                        }, [...(_cache[21] || (_cache[21] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-magic mr-3 transition-transform group-hover:rotate-12\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" 生成皮肤配置 \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\" 确认模态窗 \"),\n                _createVNode(_Transition, { name: \"fade\" }, {\n                    default: _withCtx(() => [\n                        (showConfirmModal.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"fixed inset-0 z-50 flex items-center justify-center bg-stone-900/30 p-6 backdrop-blur-sm\",\n                                onClick: _cache[7] || (_cache[7] = _withModifiers(($event) => (showConfirmModal.value = false), [\"self\"]))\n                            }, [\n                                _createElementVNode(\"div\", _hoisted_21, [\n                                    _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-[#5C7F67]/10 text-2xl text-[#5C7F67]\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-paper-plane\" })\n                                    ], -1 /* CACHED */)),\n                                    _cache[24] || (_cache[24] = _createElementVNode(\"h3\", { class: \"mb-2 text-center text-xl font-bold text-stone-800 dark:text-stone-100\" }, \"准备发送\", -1 /* CACHED */)),\n                                    _cache[25] || (_cache[25] = _createElementVNode(\"p\", { class: \"mb-8 text-center text-stone-600 dark:text-stone-300\" }, [\n                                        _createTextVNode(\" 建议使用Default预设，关闭无关世界书\"),\n                                        _createElementVNode(\"br\"),\n                                        _createTextVNode(\" 把黑棘世界书中含[🍳歌单]的条目全部关闭。 \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_22, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"flex-1 rounded-full bg-stone-100 py-3 font-bold text-stone-600 hover:bg-stone-200 dark:bg-stone-700 dark:text-stone-300\",\n                                            onClick: _cache[6] || (_cache[6] = ($event) => (showConfirmModal.value = false))\n                                        }, \" 取消 \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"flex-1 rounded-full bg-[#5C7F67] py-3 font-bold text-white hover:bg-[#4A6852]\",\n                                            onClick: confirmSend\n                                        }, \" 确认发送 \")\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SkinSetup.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SkinSetup.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SkinSetup.vue?vue&type=style&index=0&id=2d910983&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2d910983\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, openBlock as _openBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"flex min-h-[600px] w-full flex-col bg-[#FDFCF8] font-sans text-stone-600 transition-colors duration-500 dark:bg-[#1c1917] dark:text-stone-300\" };\nimport { computed, reactive, nextTick } from 'vue';\nimport { generateUUID } from './utils/id-generator';\nimport PlaylistEditor from './components/PlaylistEditor.vue';\nimport Dashboard from './views/Dashboard.vue';\nimport Home from './views/Home.vue';\nimport Setup from './views/Setup.vue';\nimport SkinSetup from './views/SkinSetup.vue';\n// --- 全局状态初始化 ---\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'app',\n    setup(__props) {\n        const state = reactive({\n            currentView: 'home',\n            activePlaylistUuid: null,\n            targetType: 'mvu',\n            defaultPlaylistId: null,\n            playlists: [],\n            // [新增] 皮肤配置初始化\n            skinConfig: {\n                excludedComponents: [],\n                metaphor: {\n                    visualRef: '',\n                    entity: '',\n                    texture: '',\n                    dynamics: '',\n                },\n                styleKeywords: [],\n                freeformRequirements: '',\n            },\n        });\n        // --- Computed ---\n        const activePlaylist = computed({\n            get: () => state.playlists.find(p => p._uuid === state.activePlaylistUuid),\n            set: newVal => {\n                if (!newVal)\n                    return;\n                const idx = state.playlists.findIndex(p => p._uuid === newVal._uuid);\n                if (idx !== -1)\n                    state.playlists[idx] = newVal;\n            },\n        });\n        // --- Actions ---\n        const navigate = async (view) => {\n            // 1. 切换视图\n            state.currentView = view;\n            if (view !== 'editor')\n                state.activePlaylistUuid = null;\n            // 2. 滚动条复位\n            // 使用 nextTick 确保 DOM 已经切换为新页面后再执行滚动\n            await nextTick();\n            // 强制瞬间回顶，移除 smooth 以避免长短页面切换时的视觉残留\n            window.scrollTo(0, 0);\n        };\n        const handleSetupComplete = (type) => {\n            state.targetType = type;\n            // 移除自动创建逻辑，允许空列表\n            navigate('dashboard');\n        };\n        const enterEditor = (uuid) => {\n            state.activePlaylistUuid = uuid;\n            navigate('editor');\n        };\n        const createPlaylist = () => {\n            const newPlaylist = {\n                _uuid: generateUUID(),\n                id: '',\n                onFinishRule: 'loop',\n                trackInputMode: 'raw',\n                tracksRaw: '',\n                tracksStructured: [],\n                mvuConfig: { type: 'base', priority: 10, initVarRaw: '', conditions: [] },\n                textConfig: { sceneDescription: '', priority: 10 },\n            };\n            state.playlists.push(newPlaylist);\n        };\n        const deletePlaylist = (uuid) => {\n            const idx = state.playlists.findIndex(p => p._uuid === uuid);\n            if (idx !== -1) {\n                if (state.playlists[idx].id === state.defaultPlaylistId)\n                    state.defaultPlaylistId = null;\n                state.playlists.splice(idx, 1);\n            }\n        };\n        const updateDefaultPlaylist = (id) => {\n            state.defaultPlaylistId = id;\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 页面转场容器 \"),\n                _createVNode(_Transition, {\n                    name: \"page\",\n                    mode: \"out-in\"\n                }, {\n                    default: _withCtx(() => [\n                        (state.currentView === 'home')\n                            ? (_openBlock(), _createBlock(Home, {\n                                key: \"home\",\n                                onStart: _cache[0] || (_cache[0] = ($event) => (navigate('setup'))),\n                                onSkin: _cache[1] || (_cache[1] = ($event) => (navigate('skin')))\n                            }))\n                            : (state.currentView === 'setup')\n                                ? (_openBlock(), _createBlock(Setup, {\n                                    key: \"setup\",\n                                    onBack: _cache[2] || (_cache[2] = ($event) => (navigate('home'))),\n                                    onSelect: handleSetupComplete\n                                }))\n                                : (state.currentView === 'dashboard')\n                                    ? (_openBlock(), _createBlock(Dashboard, {\n                                        key: \"dashboard\",\n                                        state: state,\n                                        onNavigate: navigate,\n                                        onCreate: createPlaylist,\n                                        onEdit: enterEditor,\n                                        onDelete: deletePlaylist,\n                                        \"onUpdate:defaultPlaylist\": updateDefaultPlaylist\n                                    }, null, 8 /* PROPS */, [\"state\"]))\n                                    : (state.currentView === 'editor')\n                                        ? (_openBlock(), _createBlock(PlaylistEditor, {\n                                            key: \"editor\",\n                                            modelValue: activePlaylist.value,\n                                            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((activePlaylist).value = $event)),\n                                            \"target-type\": state.targetType,\n                                            errors: {},\n                                            onBack: _cache[4] || (_cache[4] = ($event) => (navigate('dashboard')))\n                                        }, null, 8 /* PROPS */, [\"modelValue\", \"target-type\"]))\n                                        : (state.currentView === 'skin')\n                                            ? (_openBlock(), _createBlock(SkinSetup, {\n                                                key: \"skin\",\n                                                \"skin-config\": state.skinConfig,\n                                                \"onUpdate:skinConfig\": _cache[5] || (_cache[5] = ($event) => ((state.skinConfig) = $event)),\n                                                onBack: _cache[6] || (_cache[6] = ($event) => (navigate('home')))\n                                            }, null, 8 /* PROPS */, [\"skin-config\"]))\n                                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./app.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./app.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./app.vue?vue&type=style&index=0&id=64f42149&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue';\nimport app from './app.vue';\n\n$(() => {\n  createApp(app).mount('#app');\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","generateUUID","chars","autoId","i","charAt","Math","floor","random","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","__name","required","emits","setup","__props","mode","rawText","structuredList","addTrack","value","push","id","url","title","artist","cover","_ctx","_cache","type","onClick","$event","placeholder","length","name","default","track","index","splice","_","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","targetType","errors","playlist","currentType","computed","mvuConfig","finishRuleDescription","isBase","isLoop","onFinishRule","setPlaylistType","addMvuCondition","conditions","path","operator","watch","newType","$emit","TrackInput","trackInputMode","raw","tracksRaw","structured","tracksStructured","priority","number","cond","idx","rows","initVarRaw","textConfig","sceneDescription","OPERATOR_MAP","indent","level","repeat","generatePrompt","state","playlists","defaultPlaylistId","isMvu","body","defaultPlaylist","find","p","isValidDefault","forEach","typeLabel","tracks","yaml","t","trim","formatStructuredTracks","validConditions","filter","c","yamlKey","test","formatMvuConfig","prio","validateGlobalState","messages","passed","allIds","map","otherIds","basic","existingIds","includes","some","isValid","Object","keys","validatePlaylistBasic","errFields","values","join","logicErrors","baseLabel","validatePlaylistLogic","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","emit","__emit","showHelpModal","ref","showConfirmModal","getIconContainerClass","getIconClass","getPlaylistTypeLabel","onDefaultPlaylistChange","event","handleSwitchMode","confirm","handleGenerateCheck","result","errorMsg","toastr","error","alert","confirmSend","promptText","command","triggerSlash","success","timeOut","console","e","_uuid","onChange","style","COMPONENT_MAP","progress","time","volume","controls","skinConfig","componentOptions","label","desc","styleGroups","isExcluded","excludedComponents","toggleStyleKeyword","tag","list","styleKeywords","indexOf","handleGenerate","config","prompt","metaphorSection","entity","texture","dynamics","visualRef","metaphor","freeformRequirements","generateSkinPrompt","comp","reactive","currentView","activePlaylistUuid","activePlaylist","get","set","newVal","findIndex","navigate","async","view","nextTick","window","scrollTo","handleSetupComplete","enterEditor","uuid","createPlaylist","newPlaylist","deletePlaylist","updateDefaultPlaylist","Home","onStart","onSkin","Setup","onBack","onSelect","Dashboard","onNavigate","onCreate","onEdit","onDelete","PlaylistEditor","modelValue","SkinSetup","$","createApp","app","mount"],"ignoreList":[],"sourceRoot":""}